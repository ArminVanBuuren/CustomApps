<templateGroup name="StateInCountersTemplates">
  <macros>
    <define name="_IN_SMSCON" value="SMSCON_01" />
    <define name="_IN_SOAP_SUCCESS_RESULT" value="0" />
    <define name="_IN_TEMPLATE_FOR_SENDING" value="StateInCountersTemplates.DB_MessageFromOtherConnectors" />
  </macros>
  
  <!--Пример шаблона для запроса счётчика, когда счетчики пишутся в шаблоне-->
  <template procedureName="GetCounterInfo">
    <receiveTemplate>
      <Message initiator="soapcon" id="${guid}" session_id="@{newGuid}">
        <Item customer="${Msisdn}" />
        <Item CountersCodes="CR1781" />
      </Message>
    </receiveTemplate>
    <deliveryTemplate direction="input" terminating="false">
      <set item="oparam:Success" value="_IN_SOAP_SUCCESS_RESULT"/>
    </deliveryTemplate>
    <deliveryTemplate direction="input" connector="_IN_SMSCON" call="_IN_TEMPLATE_FOR_SENDING" />
    <input>
      <param name="Msisdn" />
    </input>
    <output>
      <param name="Success"  />
    </output>
  </template>
  
  <!--Пример шаблона для запроса счётчика, когда счетчики передаются в запросе-->
  <template procedureName="GetCounterInfoWithCodes">
    <receiveTemplate>
      <Message initiator="soapcon" id="${guid}" session_id="@{newGuid}">
        <Item customer="${Msisdn}" />
        <Item CountersCodes="${CountersCodes}" />
      </Message>
    </receiveTemplate>
    <deliveryTemplate direction="input" terminating="false">
      <set item="oparam:Success" value="_IN_SOAP_SUCCESS_RESULT"/>
    </deliveryTemplate>
    <deliveryTemplate direction="input" connector="_IN_SMSCON" call="_IN_TEMPLATE_FOR_SENDING" />
    <input>
      <param name="Msisdn" />
      <param name="CountersCodes" />
    </input>
    <output>
      <param name="Success"  />
    </output>
  </template>

</templateGroup>
<templateGroup name="StateInCountersTemplates">
  <macros>
    <define name="_IN_SMSCON" value="SMSCON_01" />
    <define name="_IN_TEMPLATE_FOR_SENDING" value="StateInCountersTemplates.DB_MessageFromOtherConnectors" />
  </macros>
  
  <!--Пример шаблона для запроса счётчика, когда счетчики пишутся в шаблоне-->
  <template procedureName="GetCounterInfo">
    <receiveTemplate>
      <Message initiator="ivrcon" id="${guid}" session_id="@{newGuid}">
        <Item customer="${customer}" />
        <Item CountersCodes="CR1781" />
      </Message>
    </receiveTemplate>
    <deliveryTemplate direction="input" terminating="false">
      <set item="param:dbresult" value="0"/>
    </deliveryTemplate>
    <deliveryTemplate direction="input" connector="_IN_SMSCON" call="_IN_TEMPLATE_FOR_SENDING" />
    <input>
      <param name="customer" />
    </input>
    <output>
      <param name="dbresult" type="3" value="0" />
    </output>
  </template>
  
  <!--Пример шаблона для запроса счётчика, когда счетчики передаются в запросе-->
  <template procedureName="GetCounterInfoWithCodes">
    <receiveTemplate>
      <Message initiator="ivrcon" id="${guid}" session_id="@{newGuid}">
        <Item customer="${customer}" />
        <Item CountersCodes="${counterscodes}" />
      </Message>
    </receiveTemplate>
    <deliveryTemplate direction="input" terminating="false">
      <set item="param:dbresult" value="0"/>
    </deliveryTemplate>
    <deliveryTemplate direction="input" connector="_IN_SMSCON" call="_IN_TEMPLATE_FOR_SENDING" />
    <input>
      <param name="customer" />
      <param name="counterscodes" />
    </input>
    <output>
      <param name="dbresult" type="3" value="0" />
    </output>
  </template>

</templateGroup>
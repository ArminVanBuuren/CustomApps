<BusinessProcessData name="Unblock Subscriber in All Platform" successOnNoOperation="true">
  <businessprocess>
    <scenario>
      <objectlist>
        <object name="BPMProcessingUnit" class="FORIS.ServiceProvisioning.BPM.BPMProcessingUnit" assembly="FORIS.SPA.BPMProcessingUnit.dll" />
        <object name="SplitProcess" class="FORIS.ScenarioProcessing.CommonUnits.IfMultipleXmlConditionsResolver" assembly="FORIS.SPA.SPF.dll" />
        <object name="DummyResultCreator" class="FORIS.ScenarioProcessing.CommonUnits.ConditionalDummyResultCreator" assembly="FORIS.SPA.SPF.dll" />
        <object name="BPMProcessingUnitConditional" class="FORIS.ServiceProvisioning.BPM.BPMProcessingUnitConditional" assembly="FORIS.SPA.BPMProcessingUnit.dll" />
      </objectlist>
      <automat>
        <node name="DeleteBlockOnBMS" object="BPMProcessingUnit">
          <parameterslist>
            <param name="operation" value="DeleteBlockOnBMS" />
          </parameterslist>
          <resultlist>
            <result value="" node="SplitForVirtualTD" />
          </resultlist>
        </node>
        <node name="SplitForVirtualTD" object="SplitProcess">
          <parameterslist>
            <param name="XmlNameInContext" value="$XmlRequest" />
            <param name="IfXmlPath:0" value="//TerminalDeviceType[text()='virtual']" />
          </parameterslist>
          <resultlist>
            <result value="" node="ChangeStatusesOnFINPlatform" />
            <result value="0" node="" />
          </resultlist>
        </node>
        <node name="ChangeStatusesOnFINPlatform" object="BPMProcessingUnit">
          <parameterslist>
            <param name="operation" value="ChangeStatusesOnFINPlatform" />
          </parameterslist>
          <resultlist>
            <result value="" node="SplitCDMAProcess" />
          </resultlist>
        </node>
        <node name="SplitCDMAProcess" object="SplitProcess">
          <parameterslist>
            <param name="XmlNameInContext" value="$XmlRequest" />
            <param name="IfXmlPath:0" value="//RegisteredList/POPFRBSPH2" />
            <param name="IfXmlPath:1" value="//RegisteredList/FRPOPMAP" />
          </parameterslist>
          <resultlist>
            <result value="0" node="UnBlockSubscriberOnGSR" />
            <result value="" node="SplitPopProcess" />
          </resultlist>
        </node>
        <node name="UnBlockSubscriberOnGSR" object="BPMProcessingUnit">
          <parameterslist>
            <param name="operation" value="UnBlockSubscriberOnGSR" />
          </parameterslist>
          <resultlist>
            <result value="" node="RemoveFinPoPService" />
          </resultlist>
        </node>
        <node name="SplitPopProcess" object="SplitProcess">
          <parameterslist>
            <param name="XmlNameInContext" value="$XmlRequest" />
            <param name="OrXmlPath:0" value="//RegisteredList/FRPOPMAP" />
          </parameterslist>
          <resultlist>
            <result value="0" node="DeleteFRBLKINI_GS_PoP" />
            <result value="" node="UnBlockBB" />
          </resultlist>
        </node>
        <!-- PoP -->
        <node name="DeleteFRBLKINI_GS_PoP" object="BPMProcessingUnit">
          <parameterslist>
            <param name="operation" value="DeleteFRBLKINI_GS_PoP" />
          </parameterslist>
          <resultlist>
            <result value="" node="CheckISDNforDummy" />
          </resultlist>
        </node>
        <node name="CheckISDNforDummy" object="SplitProcess">
          <parameterslist>
            <param name="XmlNameInContext" value="$XmlRequest" />
            <param name="OrXmlPath:0" value="//ProvisionList/POPISDNMAP" />
            <param name="OrXmlPath:1" value="//RegisteredList/POPISDNMAP" />
          </parameterslist>
          <resultlist>
            <result value="0" node="DummyResultCreator" />
            <result value="" node="UnblockSubscriber_PoP" />
          </resultlist>
        </node>
        <node name="UnblockSubscriber_PoP" object="BPMProcessingUnit">
          <parameterslist>
            <param name="operation" value="UnblockSubscriber_PoP" />
          </parameterslist>
          <resultlist>
            <result value="" node="UnBlock_IF_FINBLOCK_GSR" />
          </resultlist>
        </node>
        <node name="UnBlock_IF_FINBLOCK_GSR" object="BPMProcessingUnit">
          <parameterslist>
            <param name="operation" value="UnBlock_IF_FINBLOCK_GSR" />
          </parameterslist>
          <resultlist>
            <result value="" node="UnBlockBB_PoP" />
          </resultlist>
        </node>
        <node name="UnBlockBB_PoP" object="BPMProcessingUnit">
          <parameterslist>
            <param name="operation" value="UnBlockBB_PoP" />
          </parameterslist>
          <resultlist>
            <result value="" node="UnblockRBT" />
          </resultlist>
        </node>
        <node name="UnblockRBT" object="BPMProcessingUnit">
          <parameterslist>
            <param name="operation" value="UnblockRBT" />
          </parameterslist>
          <resultlist>
            <result value="" node="DeleteFRBLKINI_HL_PoP" />
          </resultlist>
        </node>
        <node name="DeleteFRBLKINI_HL_PoP" object="BPMProcessingUnit">
          <parameterslist>
            <param name="operation" value="DeleteFRBLKINI_HL_PoP" />
          </parameterslist>
          <resultlist>
            <result value="" node="DeleteFRBLKINI_LB_PoP" />
          </resultlist>
        </node>
        <node name="DeleteFRBLKINI_LB_PoP" object="BPMProcessingUnit">
          <parameterslist>
            <param name="operation" value="DeleteFRBLKINI_LB_PoP" />
          </parameterslist>
          <resultlist>
            <result value="" node="DeleteFRBLKINI_RM_PoP" />
          </resultlist>
        </node>
        <node name="DeleteFRBLKINI_RM_PoP" object="BPMProcessingUnit">
          <parameterslist>
            <param name="operation" value="DeleteFRBLKINI_RM_PoP" />
          </parameterslist>
          <resultlist>
            <result value="" node="DeleteFRBLKINI_RT_PoP" />
          </resultlist>
        </node>
        <node name="DeleteFRBLKINI_RT_PoP" object="BPMProcessingUnit">
          <parameterslist>
            <param name="operation" value="DeleteFRBLKINI_RT_PoP" />
          </parameterslist>
          <resultlist>
            <result value="" node="DeleteFRBLKINI_SD_PoP" />
          </resultlist>
        </node>
        <node name="DeleteFRBLKINI_SD_PoP" object="BPMProcessingUnit">
          <parameterslist>
            <param name="operation" value="DeleteFRBLKINI_SD_PoP" />
          </parameterslist>
          <resultlist>
            <result value="" node="UnSuspend_VPN_POST" />
          </resultlist>
        </node>
        <node name="UnSuspend_VPN_POST" object="BPMProcessingUnitConditional">
          <parameterslist>
            <param name="operation" value="UnSuspend_VPN_POST" />
            <param name="SrcXml" value="$XmlRequest" />
            <param name="MultiLevelCondition" value="&#xA;     (//RegisteredList/POP2VPN)&#xA;   AND  (//RegisteredList/UPSOFTLIM)&#xA;   AND  ((//WithdrawalList/FRBLKFIN)&#xA;   OR    (//WithdrawalList/BLKPAY)&#xA;   OR    (//WithdrawalList/POPFRBLKEXCRLIM))&#xA;   &#xA;   AND NOT (//RegisteredList/FRBLKFIN)&#xA;   AND NOT (//RegisteredList/BLKPAY)&#xA;   AND NOT (//RegisteredList/POPFRBLKEXCRLIM)&#xA;   " />
          </parameterslist>
          <resultlist>
            <result value="" node="RemoveFinPoPService" />
          </resultlist>
        </node>
        <node name="RemoveFinPoPService" object="BPMProcessingUnit">
          <parameterslist>
            <param name="operation" value="RemoveFinPoPService" />
          </parameterslist>
          <resultlist>
            <result value="" node="UnBlockCCS" />
          </resultlist>
        </node>
        <!-- PrP -->
        <node name="UnBlockBB" object="BPMProcessingUnit">
          <parameterslist>
            <param name="operation" value="UnBlockBB" />
          </parameterslist>
          <resultlist>
            <result value="" node="UnBlockBB_Post" />
          </resultlist>
        </node>
        <node name="UnBlockBB_Post" object="BPMProcessingUnit">
          <parameterslist>
            <param name="operation" value="UnBlockBB_Post" />
          </parameterslist>
          <resultlist>
            <result value="" node="DeleteFRBLKINI" />
          </resultlist>
        </node>
        <node name="DeleteFRBLKINI" object="BPMProcessingUnit">
          <parameterslist>
            <param name="operation" value="DeleteFRBLKINI" />
          </parameterslist>
          <resultlist>
            <result value="" node="DeleteFRBLKFIN" />
          </resultlist>
        </node>
        <node name="DeleteFRBLKFIN" object="BPMProcessingUnit">
          <parameterslist>
            <param name="operation" value="DeleteFRBLKFIN" />
          </parameterslist>
          <resultlist>
            <result value="" node="DeleteFRPARTBL" />
          </resultlist>
        </node>
        <node name="DeleteFRPARTBL" object="BPMProcessingUnit">
          <parameterslist>
            <param name="operation" value="DeleteFRPARTBL" />
          </parameterslist>
          <resultlist>
            <result value="" node="DeleteFRFULLBL" />
          </resultlist>
        </node>
        <node name="DeleteFRFULLBL" object="BPMProcessingUnit">
          <parameterslist>
            <param name="operation" value="DeleteFRFULLBL" />
          </parameterslist>
          <resultlist>
            <result value="" node="DeleteFRGRACE" />
          </resultlist>
        </node>
        <node name="DeleteFRGRACE" object="BPMProcessingUnit">
          <parameterslist>
            <param name="operation" value="DeleteFRGRACE" />
          </parameterslist>
          <resultlist>
            <result value="" node="UnBlockReCreate_PrP" />
          </resultlist>
        </node>
        <!-- FRLOST, ONMIND, FRAUD, PostGrace -->
        <node name="UnBlockReCreate_PrP" object="BPMProcessingUnit">
          <parameterslist>
            <param name="operation" value="UnBlockReCreate_PrP" />
          </parameterslist>
          <resultlist>
            <result value="" node="UnblockPostGraceOnGSR" />
          </resultlist>
        </node>
        <node name="UnblockPostGraceOnGSR" object="BPMProcessingUnit">
          <parameterslist>
            <param name="operation" value="UnblockPostGraceOnGSR" />
          </parameterslist>
          <resultlist>
            <result value="" node="UnBlockCCS" />
          </resultlist>
        </node>
        <!-- for PoP and PrP-->
        <node name="UnBlockCCS" object="BPMProcessingUnit">
          <parameterslist>
            <param name="operation" value="UnBlockCCS" />
          </parameterslist>
          <resultlist>
            <result value="" node="UnBlockFinCCS" />
          </resultlist>
        </node>
        <node name="UnBlockFinCCS" object="BPMProcessingUnit">
          <parameterslist>
            <param name="operation" value="UnBlockFinCCS" />
          </parameterslist>
          <resultlist>
            <result value="" node="RegDPIServices" />
          </resultlist>
        </node>
        <node name="RegDPIServices" object="BPMProcessingUnit">
          <parameterslist>
            <param name="operation" value="RegDPIServices" />
          </parameterslist>
          <resultlist>
            <result value="" node="UnblockNationalRoaming" />
          </resultlist>
        </node>
        <node name="UnblockNationalRoaming" object="BPMProcessingUnit">
          <parameterslist>
            <param name="operation" value="SetNationalRoaming" />
          </parameterslist>
          <resultlist>
            <result value="" node="ResumeServiceOnMID" />
          </resultlist>
        </node>
        <node name="ResumeServiceOnMID" object="BPMProcessingUnit">
          <parameterslist>
            <param name="operation" value="ResumeServiceOnMID" />
          </parameterslist>
          <resultlist>
            <result value="0" node="" />
            <result value="" node="ProcessFAILURE" />
          </resultlist>
        </node>
        <node name="DummyResultCreator" object="DummyResultCreator">
          <parameterslist>
            <param name="XmlNameInContext" value="$XmlRequest" />
            <param name="DetailedResult" value="0" />
            <param name="DetailedResultDescription" value="SUCCESS" />
          </parameterslist>
          <resultlist>
            <result value="" node="" />
          </resultlist>
        </node>
        <node name="ProcessFAILURE" object="DummyResultCreator">
          <resultlist>
            <result value="" node="" />
          </resultlist>
          <parameterslist>
            <param name="DetailedResult" value="1" />
            <param name="DetailedResultDescription" value="FAILURE" />
          </parameterslist>
        </node>
      </automat>
    </scenario>
  </businessprocess>
</BusinessProcessData>
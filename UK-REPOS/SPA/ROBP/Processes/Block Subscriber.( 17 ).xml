<BusinessProcessData name="Block Subscriber" successOnNoOperation="true">
  <businessprocess>
    <scenario>
      <objectlist>
        <object name="SplitProcess" class="FORIS.ScenarioProcessing.CommonUnits.IfMultipleXmlConditionsResolver" assembly="FORIS.SPA.SPF.dll" />
        <object name="DummyResultCreator" class="FORIS.ScenarioProcessing.CommonUnits.ConditionalDummyResultCreator" assembly="FORIS.SPA.SPF.dll" />
        <object name="BPMProcessingUnit" class="FORIS.ServiceProvisioning.BPM.BPMProcessingUnit" assembly="FORIS.SPA.BPMProcessingUnit.dll" />
        <object name="BPMProcessingUnitConditional" class="FORIS.ServiceProvisioning.BPM.BPMProcessingUnitConditional" assembly="FORIS.SPA.BPMProcessingUnit.dll" />
      </objectlist>
      <automat>
        <node name="SplitForDummy" object="SplitProcess">
          <parameterslist>
            <param name="XmlNameInContext" value="$XmlRequest" />
            <param name="OrXmlPath:0" value="ExtendedRequestMessage/AdditionalData/ProvisionList/POPBLONHOLD" />
            <param name="OrXmlPath:1" value="ExtendedRequestMessage/AdditionalData/ProvisionList/FRBLKINI" />
            <param name="OrXmlPath:2" value="//RegisteredList/POPISDNMAP" />
            <!-- <param name="OrXmlPath:3" value="ExtendedRequestMessage/IdentifiersList/Identifier/IMSI[starts-with(.,'2550188')]" /> -->
            <param name="IfXmlPath:0" value="ExtendedRequestMessage/AdditionalData/RegisteredList/FRPOPMAP" />
          </parameterslist>
          <resultlist>
            <result value="0" node="DummyResultCreator_BL" />
            <result value="" node="AddBlockOnBMS" />
          </resultlist>
        </node>
        <node name="DummyResultCreator_BL" object="DummyResultCreator">
          <parameterslist>
            <param name="XmlNameInContext" value="$XmlRequest" />
            <param name="DetailedResult" value="0" />
            <param name="DetailedResultDescription" value="SUCCESS" />
          </parameterslist>
          <resultlist>
            <result value="" node="SuspendServiceOnMID" />
          </resultlist>
        </node>
        <node name="AddBlockOnBMS" object="BPMProcessingUnit">
          <parameterslist>
            <param name="operation" value="AddBlockOnBMS" />
          </parameterslist>
          <resultlist>
            <result value="" node="SplitCDMAPoP" />
          </resultlist>
        </node>
        <node name="SplitCDMAPoP" object="SplitProcess">
          <parameterslist>
            <param name="XmlNameInContext" value="$XmlRequest" />
            <param name="IfXmlPath:0" value="//RegisteredList/POPFRBSPH2" />
            <param name="IfXmlPath:1" value="//RegisteredList/FRPOPMAP" />
          </parameterslist>
          <resultlist>
            <result value="0" node="BlockSubscriberOnGSR" />
            <result value="" node="SplitPopProcess" />
          </resultlist>
        </node>
        <node name="BlockSubscriberOnGSR" object="BPMProcessingUnit">
          <parameterslist>
            <param name="operation" value="BlockSubscriberOnGSR" />
          </parameterslist>
          <resultlist>
            <result value="" node="AssignFinPoPService" />
          </resultlist>
        </node>
        <node name="SplitPopProcess" object="SplitProcess">
          <parameterslist>
            <param name="XmlNameInContext" value="$XmlRequest" />
            <param name="OrXmlPath:0" value="//ProvisionList/Test11" />
            <param name="OrXmlPath:1" value="//ProvisionList/PGSM" />
            <param name="OrXmlPath:2" value="//ProvisionList/ISDN" />
            <param name="OrXmlPath:3" value="//ProvisionList/PBX" />
            <param name="OrXmlPath:4" value="//ProvisionList/SHPD" />
            <param name="OrXmlPath:5" value="//RegisteredList/FRPOPMAP" />
          </parameterslist>
          <resultlist>
            <result value="0" node="BlockSubscriber_PoP" />
            <result value="" node="BlockBB" />
          </resultlist>
        </node>
        <node name="BlockSubscriber_PoP" object="BPMProcessingUnit">
          <parameterslist>
            <param name="operation" value="BlockSubscriber_PoP" />
          </parameterslist>
          <resultlist>
            <result value="" node="BlockNationalRoaming_PoP" />
          </resultlist>
        </node>
        <node name="BlockNationalRoaming_PoP" object="BPMProcessingUnit">
          <parameterslist>
            <param name="operation" value="SetNationalRoaming" />
          </parameterslist>
          <resultlist>
            <result value="" node="Block_IF_FINBLOCK_GSR" />
          </resultlist>
        </node>
        <node name="Block_IF_FINBLOCK_GSR" object="BPMProcessingUnit">
          <parameterslist>
            <param name="operation" value="Block_IF_FINBLOCK_GSR" />
          </parameterslist>
          <resultlist>
            <result value="" node="BlockBB_PoP" />
          </resultlist>
        </node>
        <node name="BlockBB_PoP" object="BPMProcessingUnit">
          <parameterslist>
            <param name="operation" value="BlockBB_PoP" />
          </parameterslist>
          <resultlist>
            <result value="" node="BlockRBT" />
          </resultlist>
        </node>
        <node name="BlockRBT" object="BPMProcessingUnit">
          <parameterslist>
            <param name="operation" value="BlockRBT" />
          </parameterslist>
          <resultlist>
            <result value="" node="Suspend_VPN_POST" />
          </resultlist>
        </node>
        <node name="Suspend_VPN_POST" object="BPMProcessingUnitConditional">
          <parameterslist>
            <param name="operation" value="Suspend_VPN_POST" />
            <param name="SrcXml" value="$XmlRequest" />
            <param name="MultiLevelCondition" value="&#xA;       ((//ProvisionList/FRBLKFIN)&#xA;      OR   (//ProvisionList/BLKPAY)&#xA;      OR   (//ProvisionList/POPFRBLKEXCRLIM))&#xA;      AND  (//RegisteredList/POP2VPN)&#xA;      AND  (//RegisteredList/UPSOFTLIM)&#xA;   " />
          </parameterslist>
          <resultlist>
            <result value="" node="AssignFinPoPService" />
          </resultlist>
        </node>
        <node name="AssignFinPoPService" object="BPMProcessingUnit">
          <parameterslist>
            <param name="operation" value="AssignFinPoPService" />
          </parameterslist>
          <resultlist>
            <result value="" node="SuspendServiceOnMID" />
          </resultlist>
        </node>
        <node name="BlockBB" object="BPMProcessingUnit">
          <parameterslist>
            <param name="operation" value="BlockBB" />
          </parameterslist>
          <resultlist>
            <result value="" node="BlockCCS" />
          </resultlist>
        </node>
        <node name="BlockCCS" object="BPMProcessingUnit">
          <parameterslist>
            <param name="operation" value="BlockCCS" />
          </parameterslist>
          <resultlist>
            <result value="" node="BlockFinCCS" />
          </resultlist>
        </node>
        <node name="BlockFinCCS" object="BPMProcessingUnit">
          <parameterslist>
            <param name="operation" value="BlockFinCCS" />
          </parameterslist>
          <resultlist>
            <result value="" node="BlockBB_Post" />
          </resultlist>
        </node>
        <node name="BlockBB_Post" object="BPMProcessingUnit">
          <parameterslist>
            <param name="operation" value="BlockBB_Post" />
          </parameterslist>
          <resultlist>
            <result value="" node="AddFRBLKFIN" />
          </resultlist>
        </node>
        <node name="AddFRBLKFIN" object="BPMProcessingUnit">
          <parameterslist>
            <param name="operation" value="AddFRBLKFIN" />
          </parameterslist>
          <resultlist>
            <result value="" node="AddFRPARTBL" />
          </resultlist>
        </node>
        <node name="AddFRPARTBL" object="BPMProcessingUnit">
          <parameterslist>
            <param name="operation" value="AddFRPARTBL" />
          </parameterslist>
          <resultlist>
            <result value="" node="AddFRFULLBL" />
          </resultlist>
        </node>
        <node name="AddFRFULLBL" object="BPMProcessingUnit">
          <parameterslist>
            <param name="operation" value="AddFRFULLBL" />
          </parameterslist>
          <resultlist>
            <result value="" node="AddFRGRACE" />
          </resultlist>
        </node>
        <node name="AddFRGRACE" object="BPMProcessingUnit">
          <parameterslist>
            <param name="operation" value="AddFRGRACE" />
          </parameterslist>
          <resultlist>
            <result value="" node="AssignGraceService" />
          </resultlist>
        </node>
        <node name="AssignGraceService" object="BPMProcessingUnit">
          <parameterslist>
            <param name="operation" value="AssignGraceService" />
          </parameterslist>
          <resultlist>
            <result value="" node="AddFRLOST" />
          </resultlist>
        </node>
        <node name="AddFRLOST" object="BPMProcessingUnit">
          <parameterslist>
            <param name="operation" value="AddFRLOST" />
          </parameterslist>
          <resultlist>
            <result value="" node="AddFRAUD" />
          </resultlist>
        </node>
        <node name="AddFRAUD" object="BPMProcessingUnit">
          <parameterslist>
            <param name="operation" value="AddFRAUD" />
          </parameterslist>
          <resultlist>
            <result value="" node="AddOnMind" />
          </resultlist>
        </node>
        <node name="AddOnMind" object="BPMProcessingUnit">
          <parameterslist>
            <param name="operation" value="AddOnMind" />
          </parameterslist>
          <resultlist>
            <result value="" node="AddFRBLKEND" />
          </resultlist>
        </node>
        <node name="AddFRBLKEND" object="BPMProcessingUnit">
          <parameterslist>
            <param name="operation" value="AddFRBLKEND" />
          </parameterslist>
          <resultlist>
            <result value="" node="AddFRPGRACE" />
          </resultlist>
        </node>
        <node name="AddFRPGRACE" object="BPMProcessingUnit">
          <parameterslist>
            <param name="operation" value="AddFRPGRACE" />
          </parameterslist>
          <resultlist>
            <result value="" node="AddBLKPAY" />
          </resultlist>
        </node>
        <node name="AddBLKPAY" object="BPMProcessingUnit">
          <parameterslist>
            <param name="operation" value="AddBLKPAY" />
          </parameterslist>
          <resultlist>
            <result value="" node="BlockPostGraceOnGSR" />
          </resultlist>
        </node>
        <node name="BlockPostGraceOnGSR" object="BPMProcessingUnit">
          <parameterslist>
            <param name="operation" value="BlockPostGraceOnGSR" />
          </parameterslist>
          <resultlist>
            <result value="" node="BlockNationalRoaming" />
          </resultlist>
        </node>
        <node name="BlockNationalRoaming" object="BPMProcessingUnit">
          <parameterslist>
            <param name="operation" value="SetNationalRoaming" />
          </parameterslist>
          <resultlist>
            <result value="" node="SuspendServiceOnMID" />
          </resultlist>
        </node>
        <node name="SuspendServiceOnMID" object="BPMProcessingUnit">
          <parameterslist>
            <param name="operation" value="SuspendServiceOnMID" />
          </parameterslist>
          <resultlist>
            <result value="0" node="" />
            <result value="" node="ProcessFAILURE" />
          </resultlist>
        </node>
        <node name="ProcessFAILURE" object="DummyResultCreator">
          <resultlist>
            <result value="" node="" />
          </resultlist>
          <parameterslist>
            <param name="DetailedResult" value="1" />
            <param name="DetailedResultDescription" value="FAILURE" />
          </parameterslist>
        </node>
      </automat>
    </scenario>
  </businessprocess>
</BusinessProcessData>
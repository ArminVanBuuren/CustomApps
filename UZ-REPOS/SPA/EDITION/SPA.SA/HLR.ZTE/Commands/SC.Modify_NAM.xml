<Command Name="SC.Modify_NAM">
  <Description>Изменение сервиса интернет NAM</Description>
  <Author Name="Khovanskiy Vladimir" Date="2018-09-20+09:00" />
  <Request>
    <RequestTemplate>
      <![CDATA[MOD NAM:MSISDN=##msisdn##,##NAM_STATE##;^M]]>
    </RequestTemplate>
    <Item Name="msisdn" Type="Wellknown" />
    <Item Name="NAM_STATE" Type="LocalLogicalGroupParameter" />
  </Request>
  <LogicalGroupParametersList>
    <LogicalGroupParameter Name="NAM_STATE" AbsenceValue="NAM=1">
      <SourcesList PresenceValue="NAM=0,Keep=1,KEEPEPS=1" Multi="(//AddList/RFS_HLR_NET/RES_HLR_NET/Value[text()='Allow']) OR (//ModifyList/RFS_HLR_NET/RES_HLR_NET/Value[text()='Allow']) OR (//EndList/RFS_HLR_NET/RES_HLR_NET/Value[text()='Allow'])"/>
      <SourcesList PresenceValue="NAM=0,Keep=1,KEEPEPS=1" Multi="((//AddList/RFS_HLR_NET/RES_HLR_NET/Value[text()='Barring']) OR (//ModifyList/RFS_HLR_NET/RES_HLR_NET/Value[text()='Barring']) OR (//EndList/RFS_HLR_NET/RES_HLR_NET/Value[text()='Barring'])) AND (NOT //RFS_HLR_ROAMING)"/>
      <SourcesList PresenceValue="NAM=1,Keep=1,KEEPEPS=1" Multi="((//AddList/RFS_HLR_NET/RES_HLR_NET/Value[text()='Barring']) OR (//ModifyList/RFS_HLR_NET/RES_HLR_NET/Value[text()='Barring']) OR (//EndList/RFS_HLR_NET/RES_HLR_NET/Value[text()='Barring'])) AND (//RFS_HLR_ROAMING)"/>
      <SourcesList PresenceValue="NAM=1,Keep=1,KEEPEPS=1" Multi="(//AddList/RFS_HLR_NET/RES_HLR_NET/Value[text()='Deny']) OR (//ModifyList/RFS_HLR_NET/RES_HLR_NET/Value[text()='Deny']) OR (//EndList/RFS_HLR_NET/RES_HLR_NET/Value[text()='Deny'])"/>
    </LogicalGroupParameter>
  </LogicalGroupParametersList>
  <ErrorsList CodePage="windows-1251">
    <Error Name="110109" Value="SUCCESS" />
    <!--Subscriber does not exist-->
  </ErrorsList>
</Command>
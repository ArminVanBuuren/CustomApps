
<!-- <macros>
  <define name="_SMSCON" value="SMSCON_01" /> 
</macros> -->

<template procedureName="DB_LastPeriodBill" sessionStorage="Memory" sessionLifetime="29">
	<receiveTemplate>
		<Message type="retrievecustomerdata" initiator="ivrcc" id="${guid}" session_id="@{setSessionId(@{newGuid})}">
			<Item customer="${customer}" subject="lastperiodbill">
				<Attribute name="startdate" value="${startdate}" /> 
				<Attribute name="enddate" value="${enddate}" /> 
			</Item>
			@{store(sSessionExists,1)} 
		</Message>
	</receiveTemplate>
	<deliveryTemplate conditionEx="#{'${sSessionExists}'='1'}">
		<set conditionEx="0@{freeSession}" /> 
	</deliveryTemplate>
	<deliveryTemplate connector="_SMSCON" /> 
	<input>
		<param name="customer" /> 
		<param name="startdate" /> 
		<param name="enddate" /> 
	</input>
	<output>
		<param name="dbresult" value="" /> 
		<param name="draftintdotpart" value="0" /> 
		<param name="currency" value="" /> 
		<param name="beginday" value="" /> 
		<param name="endday" value="" />
	</output>
</template>
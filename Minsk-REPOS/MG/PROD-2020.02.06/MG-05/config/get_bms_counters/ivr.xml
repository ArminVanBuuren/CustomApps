<templateGroup name="BMS">
	<macros>
  		<define name="_BMSHND" value="WCFHND_01" />
  		<define name="_SMSCON" value="SMSCON_01" />
	</macros>

	<template procedureName="GetBMSBalance" handler="_BMSHND" sessionStorage="Remoting" sessionLifetime="300">
		<receiveTemplate>
			<Message type="getcounters" initiator="ivrcon" id="${guid}" session_id="@{setSessionId(${guid})}">
				<Item procedureName="GetBalance">
					<Attribute name="Customer" type="String" value="${customer}" />
					<Attribute name="Balance" />
					<Attribute name="Counters" />
					<Attribute name="CreateDate" />
					<Attribute name="Result" />
	       		</Item>
	       		@{store(sInputCode,${countercode})}
			</Message>
		</receiveTemplate>
		<deliveryTemplate direction="input" terminating="false">
			<set item="param:dbresult" value="0"/>
        </deliveryTemplate>
		<deliveryTemplate connector="_SMSCON" />
		<input>
			<param name="customer" />
		</input>
		<output>
			<param name="dbresult" type="3" value="0" />
		</output>
	</template>

</templateGroup>
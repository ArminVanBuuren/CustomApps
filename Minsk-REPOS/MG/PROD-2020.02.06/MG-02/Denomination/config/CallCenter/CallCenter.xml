<!-- CLEEP -->
   <template procedureName="DB_CleepDecision" handler="DBCON_01">
      <receiveTemplate>
         <Message type="validation" initiator="soapcon" id="${guid}" session_id="@{newGuid}">
            <Item procedureName="BILLING.cleep_decision_making" >
               <Attribute name="db_result" type="STRING" />
               <Attribute name="p_customera" type="STRING" value="${calling}"/> 
               <Attribute name="p_customerb" type="STRING" value="${dialed}"/>
            </Item>
         </Message>
      </receiveTemplate>
      <deliveryTemplate>
         <set item="oparam:result" value="${db_result}" />
      </deliveryTemplate>
      <input>
         <param name="calling" /> 
         <param name="dialed" /> 
      </input>
      <output>
         <param name="result" />
      </output>
   </template>

<!-- DB_GetInfoICR -->
   <template procedureName="DB_GetInfoICR" handler="DBCON_01">
      <receiveTemplate>
         <Message type="validation" initiator="soapcon" id="${guid}" session_id="@{newGuid}">
            <Item procedureName="BILLING.DB_get_info_for_ICR" >
               <Attribute name="msisdn" type="STRING" value="${customer}" />
               <Attribute name="rezz" type="STRING"/> 
               <Attribute name="tariff_id" type="STRING"/> 
               <Attribute name="password" type="STRING" /> 
               <Attribute name="check_password" type="STRING" /> 
               <Attribute name="cost" type="STRING" /> 
               <Attribute name="status" type="STRING" /> 
               <Attribute name="check_3g" type="STRING" /> 
               <Attribute name="arpu" type="STRING" /> 
               <Attribute name="mou" type="STRING" />  
               <Attribute name="mbou" type="STRING" /> 
               <Attribute name="flag_app" type="STRING" />
               <Attribute name="cmr" type="STRING" />
               <Attribute name="p_balance" type="STRING" />
            </Item>
         </Message>
      </receiveTemplate>
      <deliveryTemplate>
         <set item="oparam:dbresult" value="${rezz}" /> 
         <set item="oparam:tariff_id" value="${tariff_id}" />
         <set item="oparam:password" value="${password}" />
         <set item="oparam:check_password" value="${check_password}" />
         <set item="oparam:cost" value="${cost}" />
         <set item="oparam:status" value="${status}" />
         <set item="oparam:check_3g" value="${check_3g}" />
         <set item="oparam:arpu" value="${arpu}" />
         <set item="oparam:mou" value="${mou}" />
         <set item="oparam:mbou" value="${mbou}" />
         <set item="oparam:flag_app" value="${flag_app}" />
         <set item="oparam:cmr" value="${cmr}" />
         <set item="oparam:balance" value="${p_balance}" />
      </deliveryTemplate>
      <input>
         <param name="customer" /> 
      </input>
      <output>
         <param name="dbresult" /> 
         <param name="tariff_id" /> 
         <param name="password" /> 
         <param name="check_password" /> 
         <param name="cost" /> 
         <param name="status" /> 
         <param name="check_3g" /> 
         <param name="arpu" /> 
         <param name="mou" /> 
         <param name="mbou" /> 
         <param name="flag_app" />
         <param name="cmr" />
         <param name="balance" />
      </output>
   </template>

<!-- DB_GetInfoICR_Fee -->
   <template procedureName="DB_GetInfoICR_Fee" handler="DBCON_03">
	<receiveTemplate>
		<Message type="retrievecustomerdata" initiator="soapcon" id="@{newGuid}" session_id="@{newGuid}">
			<Item procedureName="GetInfoICR_Fee">
				<Attribute name="i_msisdn" type="STRING" value="${customer}" /> 
				<Attribute name="i_day" type="INT" value="${period}" /> 
				<Attribute name="Period" type="CURSOR" /> 
				<Attribute name="outparam1" type="STRING" /> 
				<Attribute name="outparam2" type="INT" /> 
				<Attribute name="time_request" type="out:DATETIME" /> 
			</Item>
		</Message>
	</receiveTemplate>
	<deliveryTemplate>
		<set item="oparam:fee" value="#{NodesetToString(nodeset('${Period}'))}" /> 
	</deliveryTemplate>
	<input>
		<param name="customer" /> 
		<param name="period" />
	</input>
	<output>
		<param name="fee" /> 
	</output>
  </template>





<!-- DB_IVR_WHITE_LIST_CHECK -->
    <template procedureName="DB_IVR_WHITE_LIST_CHECK" handler="DBCON_01">
      <receiveTemplate>
         <Message type="serviceorder" initiator="soapcon" id="${guid}" session_id="@{newGuid}">
            <Item procedureName="BILLING.DB_IVR_WHITE_LIST_CHECK" >
               <Attribute name="callingnumber" type="STRING" value="${customer}" />
               <Attribute name="o_result" type="STRING" /> 
            </Item>
         </Message>
      </receiveTemplate>
      <deliveryTemplate>
		 <set item="oparam:o_result" value="${o_result}" />
      </deliveryTemplate>
      <input>
         <param name="customer" /> 
      </input>
      <output>
         <param name="o_result" /> 
      </output>
    </template>
	
	<!-- DMS order  -->
    <template procedureName="DB_DMS_order"  handler="DBCON_02">
    <receiveTemplate>
			<Message type="DB_DMS_order" initiator="ivrcon" id="${guid}" session_id="@{newGuid}">
				<Item procedureName="oms.adapters_in.create_synch_order">
					<Attribute name="i_ident" type="STRING" value="${customer}" /> 
					<Attribute name="i_product" type="STRING" value="110" /> 
					<Attribute name="i_action" type="STRING" value="1" /> 
					<Attribute name="i_source_id" type="STRING" value="9" /> 
					<Attribute name="i_add_param" type="STRING" value="${internet_param}" /> 
					<Attribute name="o_order_id" type="STRING" /> 
					<Attribute name="o_result_code" type="STRING" /> 
					<Attribute name="o_result_msg" type="STRING" /> 
				</Item>
			</Message>
    </receiveTemplate>
	<deliveryTemplate>
		<set item="oparam:dbresult" condition="//Item/@dbresult='0'" value="${o_result_code}" />
		<set item="oparam:dbresult" condition="//Item/@dbresult!='0'" value="-1" />
       </deliveryTemplate>
    <input>
      <param name="customer" />
      <param name="internet_param" />
    </input>
    <output>
      <param name="dbresult" />
    </output>
  </template>

	<!-- Send SMS from IVR-->
  <template procedureName="DB_Send_SMS_IVR" handler="DBCON_01">
    <receiveTemplate>
       <Message type="DB_Send_SMS_IVR" initiator="soapcon" id="${guid}" session_id="@{newGuid}">
          <Item procedureName="billing.DB_Send_SMS_IVR" >
               <Attribute name="callingDB" type="STRING" value="${customer}" />
               <Attribute name="message" type="STRING"  value="${message}"/> 
               <Attribute name="dbresult" type="STRING" /> 
          </Item>
       </Message>
    </receiveTemplate>
    <deliveryTemplate>
       <set item="oparam:dbresult" condition="//Item/@dbresult='-1'" value="error" /> 
       <set item="oparam:dbresult" condition="//Item/@dbresult='0'" value="0" />  
    </deliveryTemplate>
    <input>
      <param name="customer" />
      <param name="message" />
    </input>
    <output>
      <param name="dbresult" />
    </output>
  </template>

	<!-- DB_CallBackCC -->
   <template procedureName="DB_CallBackCC" handler="DBCON_01">
      <receiveTemplate>
         <Message type="serviceorder" initiator="soapcon" id="${guid}" session_id="@{newGuid}">
            <Item procedureName="BILLING.DB_CallBackCC" >
               <Attribute name="callingnumber" type="STRING" value="${customer}" />
               <Attribute name="numberforcallback" type="STRING"  value="${numberforcallback}"/> 
               <Attribute name="dialled" type="STRING"  value="${dialled}"/> 
               <Attribute name="dbresult" type="STRING" /> 
            </Item>
         </Message>
      </receiveTemplate>
      <deliveryTemplate>
         <set item="oparam:dbresult" condition="//Item/@dbresult='-1'" value="error" /> 
         <set item="oparam:dbresult" condition="//Item/@dbresult='0'" value="0" />  
      </deliveryTemplate>
      <input>
         <param name="customer" /> 
         <param name="numberforcallback" /> 
         <param name="dialled" /> 
      </input>
      <output>
         <param name="dbresult" /> 
      </output>
   </template>

  <!-- DB_CALLBACKCC_UPDATE -->
   <template procedureName="DB_CALLBACKCC_UPDATE" handler="DBCON_01">
      <receiveTemplate>
         <Message type="serviceorder" initiator="soapcon" id="${guid}" session_id="@{newGuid}">
            <Item procedureName="BILLING.DB_CALLBACKCC_UPDATE" >
               <Attribute name="callingnumber" type="STRING" value="${customer}" />
               <Attribute name="dialled" type="STRING"  value="${dialled}"/> 
               <Attribute name="dbresult" type="STRING" /> 
            </Item>
         </Message>
      </receiveTemplate>
      <deliveryTemplate>
         <set item="oparam:dbresult" condition="//Item/@dbresult='-1'" value="error" /> 
         <set item="oparam:dbresult" condition="//Item/@dbresult='0'" value="0" />  
      </deliveryTemplate>
      <input>
         <param name="customer" /> 
         <param name="dialled" /> 
      </input>
      <output>
         <param name="dbresult" /> 
      </output>
   </template>
	
	<!--    DB_CAuthentication              -->
	<template procedureName="DB_CAuthentication">
		<receiveTemplate>
			<Message type="authenticationrequest" initiator="ivrcon" id="${guid}" session_id="@{newGuid}">
				<Item customer="${customer}" pin="${password}"	/>
			</Message>
		</receiveTemplate>
		<deliveryTemplate>
			<set item="oparam:dbresult" value="#{/Message/Item/@dbresult}" /> 
			<set item="oparam:tariff" value="#{/Message/Item/@tariffplan}" /> 
		</deliveryTemplate>
		<input>
			<param name="customer" />
			<param name="password" />
		</input>
		<output>
			<param name="dbresult" />
			<param name="tariff" />		
		</output>
	</template>	

	
	<!--    DB_NewValidation              -->
		<template procedureName="DB_NewValidation" handler="DBCON_01">
		<receiveTemplate>
			<Message type="verificationrequest" initiator="soapcon" id="${guid}" session_id="@{newGuid}">
				<Item procedureName="billing.mg_get_validation_for_ivr" >
					<Attribute name="dbresult" type="STRING" /> 
					<Attribute name="p_tariffplan" type="STRING" /> 
					<Attribute name="p_state" type="STRING" /> 
					<Attribute name="p_password" type="STRING" /> 
					<Attribute name="p_regioncode" type="STRING" />
					<Attribute name="p_tp_name" type="STRING" /> 
					<Attribute name="p_check_password" type="STRING" /> 
					<Attribute name="p_msisdn" type="STRING" value="${customer}" /> 
					<Attribute name="p_cost" type="STRING" /> 
				</Item>
			</Message>
		</receiveTemplate>
		<deliveryTemplate>
			<set item="oparam:tariff" value="${p_tariffplan}" /> 
			<set item="oparam:state" value="${p_state}" />
			<set item="oparam:password" value="${p_password}" />
			<set item="oparam:regioncode" value="${p_regioncode}" />
			<set item="oparam:tp_name" value="${p_tp_name}" />
			<set item="oparam:dbresult" value="${dbresult}" />
			<set item="oparam:check_password" value="${p_check_password}" />
			<set item="oparam:cost" value="${p_cost}" />
		</deliveryTemplate>
		<input>
			<param name="customer" />
		</input>
		<output>
			<param name="tariff" />
			<param name="state" />		
			<param name="password" />		
			<param name="regioncode" />		
			<param name="tp_name" />		
			<param name="dbresult" />		
			<param name="check_password" />		
			<param name="cost" />		
		</output>
	</template>		
	
	
	
	<!--    DB_Paymentretriew              -->
		<template procedureName="DB_Paymentretriew" handler="DBCON_01">
		<receiveTemplate>
			<Message type="verificationrequest" initiator="soapcon" id="${guid}" session_id="@{newGuid}">
				<Item procedureName="billing.enin_DB_PaymentRetriev" >
					<Attribute name="dbresult" type="STRING"/> 
					<Attribute name="p_count" type="STRING" /> 
					<Attribute name="p_am1" type="STRING" /> 
					<Attribute name="p_dt1" type="STRING" /> 
					<Attribute name="p_am2" type="STRING" /> 
					<Attribute name="p_dt2" type="STRING" /> 
					<Attribute name="p_am3" type="STRING" /> 
					<Attribute name="p_dt3" type="STRING" /> 
					<Attribute name="p_am4" type="STRING" /> 
					<Attribute name="p_dt4" type="STRING" /> 
					<Attribute name="p_am5" type="STRING" /> 
					<Attribute name="p_dt5" type="STRING" /> 
					<Attribute name="p_msisdn" type="STRING" value="${customer}"/> 
				</Item>
			</Message>
		</receiveTemplate>
		<deliveryTemplate>		
			<set item="oparam:dbresult" value="${dbresult}" />
			<set item="oparam:count" value="${p_count}" /> 
			<set item="oparam:payment1" value="${p_am1}" />
			<set item="oparam:payment2" value="${p_am2}" />
			<set item="oparam:payment3" value="${p_am3}" />
			<set item="oparam:payment4" value="${p_am4}" />
			<set item="oparam:payment5" value="${p_am5}" />
			<set item="oparam:date1" value="${p_dt1}" />
			<set item="oparam:date2" value="${p_dt2}" />
			<set item="oparam:date3" value="${p_dt3}" />
			<set item="oparam:date4" value="${p_dt4}" />
			<set item="oparam:date5" value="${p_dt5}" />
		</deliveryTemplate>
		<input>
			<param name="customer" />
		</input>
		<output>
			<param name="dbresult" />
			<param name="count" />
			<param name="payment1" />		
			<param name="payment2" />		
			<param name="payment3" />		
			<param name="payment4" />		
			<param name="payment5" />		
			<param name="date1" />		
			<param name="date2" />		
			<param name="date3" />		
			<param name="date4" />		
			<param name="date5" />		
		</output>
	</template>	
	
		<!--    DB_PayVerification              -->
		<template procedureName="DB_PayVerification" handler="DBCON_01">
		<receiveTemplate>
			<Message type="verificationrequest" initiator="soapcon" id="${guid}" session_id="@{newGuid}">
				<Item procedureName="BILLING.IS_PAY_CLAIMED" >
					<Attribute name="dbresult" type="STRING"/> 
					<Attribute name="p_Allowed" type="STRING" /> 
					<Attribute name="p_Pending" type="STRING" /> 
					<Attribute name="p_Maximumusd" type="STRING" /> 
					<Attribute name="p_Maximumrur" type="STRING"/> 
					<Attribute name="p_msisdn" type="STRING"  value="${customer}"/> 
					<Attribute name="p_msisdn_o" type="STRING" /> <!-- number customer from IMSI-->
					<Attribute name="p_source" type="STRING" value="9"/> 
					<Attribute name="p_pending_str" type="STRING" /> 
					<Attribute name="p_addon" type="STRING" /> 
				</Item>
			</Message>
		</receiveTemplate>
		<deliveryTemplate>		
			<set item="oparam:dbresult" value="${dbresult}" />
			<set item="oparam:IsAllowed" value="${p_Allowed}" /> 
			<set item="oparam:Pending" value="${p_Pending}" />
			<set item="oparam:MaxRUB" value="${p_Maximumrur}" />
			<set item="oparam:MaxUSD" value="${p_Maximumusd}" />
		</deliveryTemplate>
		<input>
			<param name="customer" />
		</input>
		<output>
			<param name="dbresult" />
			<param name="IsAllowed" />
			<param name="Pending" />		
			<param name="MaxRUB" />		
			<param name="MaxUSD" />		
		</output>
	</template>
	
	<!--    DB_PayAcceptance              -->
	<template procedureName="DB_PayAcceptance" handler="DBCON_01">
		<receiveTemplate>
			<Message type="verificationrequest" initiator="soapcon" id="${guid}" session_id="@{newGuid}">
				<Item procedureName="BILLING.mg_add_pay_claimed" >
					<Attribute name="dbresult" type="STRING"/> 
					<Attribute name="p_Allowed" type="STRING" /> 
					<Attribute name="p_Amount" type="STRING" /> 
					<Attribute name="p_Currency" type="STRING" /> 
					<Attribute name="p_msisdn" type="STRING" value="${customer}"/> 
					<Attribute name="p_sum" type="STRING"  value="${amount}"/> 
					<Attribute name="p_curr" type="STRING" value="933"/> 
					<Attribute name="p_source" type="STRING" value="9" /> 
				</Item>
			</Message>
		</receiveTemplate>
		<deliveryTemplate>		
			<set item="oparam:dbresult" value="${dbresult}" />
			<set item="oparam:IsAllowed" value="${p_Allowed}" /> 
			<set item="oparam:Amount" value="${p_Amount}" />
			<set item="oparam:Currency" value="${p_Currency}" />
		</deliveryTemplate>
		<input>
			<param name="customer" />
			<param name="amount" />
		</input>
		<output>
			<param name="dbresult" />
			<param name="IsAllowed" />
			<param name="Amount" />		
			<param name="Currency" />		
		</output>
	</template>
	
	<!--    DB_ProcessDates              -->
	<template procedureName="DB_ProcessDates">
		<receiveTemplate>
			<Message type="internal" initiator="ivrcon" id="${guid}" session_id="@{newGuid}">
				<Item customer="${customer}" action="${action}">
					<Attribute name="startdate" value="${startdate}" /> 
					<Attribute name="enddate" value="${enddate}" /> 
					</Item>
			</Message>
		</receiveTemplate>
		<deliveryTemplate>		
			<set item="oparam:dbresult" value="${dbresult}" />
			<set item="oparam:dStartDate" value="${startdate}" /> 
			<set item="oparam:dEndDate" value="${enddate}" />
		</deliveryTemplate>
		<input>
			<param name="customer" />
			<param name="action" />
			<param name="startdate" />
			<param name="enddate" />
		</input>
		<output>
			<param name="dbresult" />
			<param name="dStartDate" />
			<param name="dEndDate" />		
		</output>
	</template>
	
		
	<!--    DB_SInterrogation              -->
	<template procedureName="DB_SInterrogation" handler="DBCON_01">
		<receiveTemplate>
			<Message type="interrogationrequest" initiator="ivrcon" id="${guid}" session_id="@{newGuid}">
				<Item procedureName="BILLING.mg_serviceinterrogation" >
					<Attribute name="dbresult" type="STRING"/> 
					<Attribute name="p_Allowed" type="STRING" /> 
					<Attribute name="p_Subscription" type="STRING" /> 
					<Attribute name="p_Status" type="STRING" /> 
					<Attribute name="p_Class" type="STRING"/> 
					<Attribute name="p_ChargedAmount" type="STRING"/> 
					<Attribute name="p_msisdn" type="STRING" value="${customer}"/> 
					<Attribute name="p_service" type="STRING" value="${servicecode}" /> 
				</Item>
			</Message>
		</receiveTemplate>
		<deliveryTemplate>		
			<set item="oparam:dbresult" value="${dbresult}" />
			<set item="oparam:IsAllowed" value="${p_Allowed}" />
			<set item="oparam:IsSubscribed" value="${p_Subscription}" />
			<set item="oparam:IsActivated" value="${p_Status}" />
			<set item="oparam:ServiceClass" value="${p_Class}" />
			<set item="oparam:ChargedAmount" value="${p_ChargedAmount}" />
		</deliveryTemplate>
		<input>
			<param name="customer" />
			<param name="servicecode" />
		</input>
		<output>
			<param name="dbresult" />	
			<param name="IsAllowed" />
			<param name="IsSubscribed" />
			<param name="IsActivated" />
			<param name="ServiceClass" />
			<param name="ChargedAmount" />
		</output>
	</template>
	
	<!--    DB_SProcessing              -->
	<template procedureName="DB_SProcessing" >
		<receiveTemplate>
			<Message type="serviceorder" initiator="IVRCON" id="${guid}" session_id="@{newGuid}">
				<Item customer="${customer}">
					<Service id="changetariffplan" action="${action}" class="${serviceclass}" needtarification="1" createrequest="1" />
				</Item>
			</Message>
		</receiveTemplate>
		<deliveryTemplate>		
			<set item="oparam:dbresult" value="${dbresult}" />
			<set item="oparam:IsSubscribed" value="${resultcode}" />
			<set item="oparam:IsActivated" value="${ischarged}" />
			<set item="oparam:ChargedByte" value="${price}" />
		</deliveryTemplate>
		<input>
			<param name="customer" />
			<param name="servicecode" />
			<param name="serviceclass" />
			<param name="action" />
		</input>
		<output>
			<param name="dbresult" />	
			<param name="IsSubscribed" />
			<param name="IsActivated" />
			<param name="ChargedByte" />
		</output>
	</template>
	
	<!--    DB_TP_prechange              -->
	<template procedureName="DB_TP_prechange" handler="DBCON_01">
		<receiveTemplate>
			<Message type="verificationrequest" initiator="ivrcon" id="${guid}" session_id="@{newGuid}">
				<Item procedureName="BILLING.lll_ussd_p_ch_tp" >
					<Attribute name="dbresult" type="STRING"/> 
					<Attribute name="result_str" type="STRING" /> 
					<Attribute name="num" type="STRING" value="${customer}"/> 
				</Item>
			</Message>
		</receiveTemplate>
		<deliveryTemplate>		
			<set item="oparam:dbresult" value="${dbresult}" />
			<set item="oparam:result" value="${result_str}" />
		</deliveryTemplate>
		<input>
			<param name="customer" />
		</input>
		<output>
			<param name="dbresult" />	
			<param name="result" />
		</output>
	</template>

	<!--    DB_FavUpdate              -->
	<template procedureName="DB_FavUpdate" >
		<receiveTemplate>
			<Message type="setprofile" initiator="ivrcon" id="${guid}" session_id="@{newGuid}">
				<Item customer="${customer}" action="${action}">
					<Attribute name="favouritenumber" value="${favnum}" /> 
					<Attribute name="index" value="${index}" />
@{switch(${action}|,9|<Attribute name="favouritenumbernew" value="${favnumnew}" />,10|<Attribute name="favouritenumbernew" value="${favnumnew}" />,11|<Attribute name="favouritenumbernew" value="${favnumnew}" />)}					
					<Attribute name="favouritenumbertypeid" value="${favouritenumbertypeid}" /> 
					<Attribute name="createrequest" value="1" /> 
				</Item>
			</Message>
		</receiveTemplate>
		<deliveryTemplate>		
			<set item="oparam:dbresult" value="${dbresult}" />
			<set item="oparam:favnum" value="${favouritenumber}" />
			<set item="oparam:count" value="${count}" />
		</deliveryTemplate>
		<input>
			<param name="customer" />
			<param name="action" />
			<param name="index" />
			<param name="favnum" />
			<param name="favnumnew" />
			<param name="favouritenumbertypeid" />
		</input>
		<output>
			<param name="dbresult" />	
			<param name="favnum" />
			<param name="count" />
		</output>
	</template>
	
	<!--    DB_CustomerBlock              -->
	<template procedureName="DB_CustomerBlock" >
		<receiveTemplate>
			<Message type="serviceorder" initiator="ivrcon" id="${guid}" session_id="@{newGuid}">
				<Item customer="${customer}">
						<Service id="blockphone" action="4">
						<Attribute name="state" value="${action}" />
						<Attribute name="start" value="${sStartDate}" />
						<Attribute name="end" value="${sEndDate}" />
					</Service>
				</Item>
			</Message>
		</receiveTemplate>
		<deliveryTemplate>		
			<set item="oparam:dbresult" value="${dbresult}" />
			<set item="oparam:count" value="${count}" />
		</deliveryTemplate>
		<input>
			<param name="customer" />
			<param name="sStartDate" />
			<param name="sEndDate" />
			<param name="action" />
		</input>
		<output>
			<param name="dbresult" />	
			<param name="count" />
		</output>
	</template>
	
	<!--    DB_BalanceRetriew              -->
	<template procedureName="DB_BalanceRetriew" handler="DBCON_01">
		<receiveTemplate>
			<Message type="verificationrequest" initiator="ivrcon" id="${guid}" session_id="@{newGuid}">
				<Item procedureName="BILLING.GET_BALL_IVR_190207" >
					<Attribute name="dbresult" type="STRING"/> 
					<Attribute name="p_Balance" type="STRING" /> 
					<Attribute name="p_Accum1" type="STRING" /> 
					<Attribute name="p_Accum2" type="STRING" /> 
					<Attribute name="p_Accum3" type="STRING" /> 
					<Attribute name="p_disconnectiontime" type="STRING" /> 
					<Attribute name="p_msisdn" type="STRING" value="${customer}"/> 
				</Item>
			</Message>
		</receiveTemplate>
		<deliveryTemplate>		
			<set item="oparam:dbresult" value="${dbresult}" />
			<set item="oparam:AccBalance" value="${p_Balance}" />
			<set item="oparam:Accum1" value="" />
			<set item="oparam:Accum2" value="" />
			<set item="oparam:Accum3" value="" />
			<set item="oparam:EstimateDays" value="${p_disconnectiontime}" />
		</deliveryTemplate>
		<input>
			<param name="customer" />
		</input>
		<output>
			<param name="dbresult" />	
			<param name="AccBalance" />
			<param name="Accum1" />
			<param name="Accum2" />
			<param name="Accum3" />
			<param name="EstimateDays" />
		</output>
	</template>

<!--    DB_GetBalance              -->
	<template procedureName="DB_GetBalance" handler="DBCON_01">
		<receiveTemplate>
			<Message type="verificationrequest" initiator="ivrcon" id="${guid}" session_id="@{newGuid}">
				<Item procedureName="BILLING.GET_BALANCE_IVR" >
					<Attribute name="dbresult" type="STRING"/> 
					<Attribute name="p_Balance" type="STRING" /> 
					<Attribute name="p_Accum2" type="STRING" /> 
					<Attribute name="p_Accum3" type="STRING" /> 
					<Attribute name="p_Accum4" type="STRING" /> 
					<Attribute name="p_Accum5" type="STRING" /> 
					<Attribute name="p_Accum6" type="STRING" /> 
					<Attribute name="p_Accum25" type="STRING" /> 
					<Attribute name="p_Accum35" type="STRING" /> 
					<Attribute name="p_Accum45" type="STRING" /> 
					<Attribute name="p_Accum60" type="STRING" /> 
					<Attribute name="p_Accum86" type="STRING" /> 
					<Attribute name="p_Accum87" type="STRING" /> 
					<Attribute name="p_Accum88" type="STRING" /> 
					<Attribute name="p_Accum89" type="STRING" /> 
					<Attribute name="p_Accum90" type="STRING" /> 
					<Attribute name="p_Accum94" type="STRING" /> 
					<Attribute name="p_Accum97" type="STRING" /> 
					<Attribute name="p_Accum99" type="STRING" /> 
					<Attribute name="p_disconnectiontime" type="STRING" /> 
					<Attribute name="p_msisdn" type="STRING" value="${customer}"/> 
				</Item>
			</Message>
		</receiveTemplate>
		<deliveryTemplate>		
			<set item="oparam:dbresult" value="${dbresult}" />
			<set item="oparam:AccBalance" value="${p_Balance}" />
			<set item="oparam:Accum2" value="${p_Accum2}" />
			<set item="oparam:Accum3" value="${p_Accum3}" />
			<set item="oparam:Accum5" value="${p_Accum5}" />
			<set item="oparam:Accum6" value="${p_Accum6}" />
			<set item="oparam:Accum25" value="${p_Accum25}" />
			<set item="oparam:Accum35" value="${p_Accum35}" />
			<set item="oparam:Accum45" value="${p_Accum45}" />
			<set item="oparam:Accum60" value="${p_Accum60}" />
			<set item="oparam:Accum86" value="${p_Accum86}" />
			<set item="oparam:Accum87" value="${p_Accum87}" />
			<set item="oparam:Accum88" value="${p_Accum88}" />
			<set item="oparam:Accum89" value="${p_Accum89}" />
			<set item="oparam:Accum90" value="${p_Accum90}" />
			<set item="oparam:Accum94" value="${p_Accum94}" />
			<set item="oparam:Accum97" value="${p_Accum97}" />
			<set item="oparam:Accum99" value="${p_Accum99}" />
			<set item="oparam:EstimateDays" value="${p_disconnectiontime}" />
		</deliveryTemplate>
		<input>
			<param name="customer" />
		</input>
		<output>
			<param name="dbresult" />	
			<param name="AccBalance" />
			<param name="Accum2" />
			<param name="Accum3" />
			<param name="Accum4" />
			<param name="Accum5" />
			<param name="Accum6" />
			<param name="Accum25" />
			<param name="Accum35" />
			<param name="Accum45" />
			<param name="Accum60" />
			<param name="Accum86" />
			<param name="Accum87" />
			<param name="Accum88" />
			<param name="Accum89" />
			<param name="Accum90" />
			<param name="Accum94" />
			<param name="Accum97" />
			<param name="Accum99" />
			<param name="EstimateDays" />
		</output>
	</template>


<!--    DB_GetBalance_              -->
	<template procedureName="DB_GetBalance_" handler="DBCON_01">
		<receiveTemplate>
			<Message type="verificationrequest" initiator="ivrcon" id="${guid}" session_id="@{newGuid}">
				<Item procedureName="BILLING.GET_BALANCE_IVR_" >
					<Attribute name="dbresult" type="STRING"/> 
					<Attribute name="p_Balance" type="STRING" /> 
					<Attribute name="p_AccumMinut" type="STRING" /> 
					<Attribute name="p_AccumMB" type="STRING" /> 
					<Attribute name="p_AccumSMS" type="STRING" /> 
					<Attribute name="p_AccumMMS" type="STRING" /> 
					<Attribute name="p_AccumMoney" type="STRING" /> 					
					<Attribute name="p_disconnectiontime" type="STRING" /> 
					<Attribute name="p_msisdn" type="STRING" value="${customer}"/> 
					<Attribute name="p_sendSMS" type="STRING" value="${sendSMS}"/> 
				</Item>
			</Message>
		</receiveTemplate>
		<deliveryTemplate>		
			<set item="oparam:dbresult" value="${dbresult}" />
			<set item="oparam:AccBalance" value="${p_Balance}" />
			<set item="oparam:AccumMinut" value="${p_AccumMinut}" />
			<set item="oparam:AccumMB" value="${p_AccumMB}" />
			<set item="oparam:AccumSMS" value="${p_AccumSMS}" />
			<set item="oparam:AccumMMS" value="${p_AccumMMS}" />
			<set item="oparam:AccumMoney" value="${p_AccumMoney}" />
			<set item="oparam:EstimateDays" value="${p_disconnectiontime}" />
		</deliveryTemplate>
		<input>
			<param name="customer" />
			<param name="sendSMS" />
		</input>
		<output>
			<param name="dbresult" />	
			<param name="AccBalance" />
			<param name="AccumMinut" />
			<param name="AccumMB" />
			<param name="AccumSMS" />
			<param name="AccumMMS" />
			<param name="AccumMoney" />
			<param name="EstimateDays" />
		</output>
	</template>
	
	<!--    DB_0990_QOS              -->
	<template procedureName="DB_0990_QOS" handler="DBCON_01">
		<receiveTemplate>
			<Message type="verificationrequest" initiator="ivrcon" id="${guid}" session_id="@{newGuid}">
				<Item procedureName="billing.lll_ivr_0990" >
					<Attribute name="mob_num" type="STRING" value="${customer}"/> 
					<Attribute name="pr" type="STRING"/> 
				</Item>
			</Message>
		</receiveTemplate>
		<deliveryTemplate>		
			<set item="oparam:dbresult" value="${pr}" />
		</deliveryTemplate>
		<input>
			<param name="customer" />
		</input>
		<output>
			<param name="dbresult" />
		</output>
	</template>
	
	<template procedureName="DB_Add_Service" handler="DBCON_01">
		<receiveTemplate>
			<Message type="serviceorder" initiator="soapcon" id="${guid}" session_id="@{newGuid}">
				<Item procedureName="BILLING.add_close_srv_req.add_srv_req" >
					<Attribute name="p_msisdn" type="STRING" value="${customer}" />
					<Attribute name="srv_del_str" type="STRING" value="${servicecode}" /> 
					<Attribute name="source" type="STRING" value="${sourceid}" /> 
					<Attribute name="ret_code" type="STRING" /> 
					<Attribute name="reply" type="STRING" /> 
					<Attribute name="dbresult" type="STRING" /> 
				</Item>
			</Message>
		</receiveTemplate>
		<deliveryTemplate>
			<set item="oparam:dbresult" value="${ret_code}" />
			<set item="oparam:result" value="${reply}" />
		</deliveryTemplate>	
		<input>
			<param name="customer" />
			<param name="servicecode" />
			<param name="sourceid" />
		</input>
		<output>
			<param name="dbresult" />
			<param name="result" />		
		</output>
	</template>	
	
		<template procedureName="DB_Del_Service" handler="DBCON_01">
		<receiveTemplate>
			<Message type="serviceorder" initiator="soapcon" id="${guid}" session_id="@{newGuid}">
				<Item procedureName="BILLING.add_close_srv_req.del_srv_req" >
					<Attribute name="p_msisdn" type="STRING" value="${customer}" />
					<Attribute name="srv_del_str" type="STRING" value="${servicecode}" /> 
					<Attribute name="source" type="STRING" value="${sourceid}" /> 
					<Attribute name="d_end" type="STRING" value="${time_end}" />
					<Attribute name="ret_code" type="STRING" /> 
					<Attribute name="reply" type="STRING" /> 
					<Attribute name="dbresult" type="STRING" /> 
				</Item>
			</Message>
		</receiveTemplate>
		<deliveryTemplate>
			<set item="oparam:dbresult" value="${ret_code}" />
			<set item="oparam:result" value="${reply}" />
		</deliveryTemplate>	
		<input>
			<param name="customer" />
			<param name="servicecode" />
			<param name="sourceid" />
			<param name="time_end" />
		</input>
		<output>
			<param name="dbresult" />
			<param name="result" />			
		</output>
	</template>		
	
	<!-- Change PASS -->
	<template procedureName="DB_PassChange" >
		<receiveTemplate>
			<Message type="setprofile" initiator="ivrcon" id="${guid}" session_id="@{newGuid}">
				<Item customer="${customer}">
					<Attribute name="oldpassword" value="1111" /> 
					<Attribute name="newpassword" value="${newpassword}" /> 
					<Attribute name="confirmpassword" value="${newpassword}" /> 
				</Item>
			</Message>
		</receiveTemplate>
		<deliveryTemplate>
			<set item="oparam:dbresult" value="${dbresult}" /> 
		</deliveryTemplate>
		<input>
			<param name="customer" /> 
			<param name="oldpassword" /> 
			<param name="newpassword" /> 
			<param name="confirmpassword" /> 
		</input>
		<output>
			<param name="dbresult" /> 
		</output>
	</template>

	<!-- VMAS -->
	<template procedureName="DB_VMASPayment" >
		<receiveTemplate>
			<Message type="vmaspayment" id="${guid}" initiator="IVR" session_id="@{newGuid}">
				<Item>
					<Attribute name="payer" value="${payer}" />
					<Attribute name="receiver" value="${receiver}" />
					<Attribute name="pin" value="${pin}" />
					<Attribute name="network_operator_code" value="${network_operator_code}" />
					<Attribute name="operator_id" value="${operator_id}" />
				</Item>
			</Message>
		</receiveTemplate>
		<deliveryTemplate>
			<set item="oparam:dbresult" value="${dbresult}" /> 
			<set item="oparam:receiver" value="${receiver}" /> 
			<set item="oparam:amount" value="${amount}" /> 
			<set item="oparam:amount_type" value="933" /> 
			<set item="oparam:balance_expiration_period" value="0" /> 
			<set item="oparam:receiver_system" value="FORIS" /> 
		</deliveryTemplate>
		<input>
			<param name="payer" /> 
			<param name="receiver" /> 
			<param name="pin" /> 
			<param name="network_operator_code" /> 
			<param name="operator_id" /> 
		</input>
		<output>
			<param name="dbresult" /> 
			<param name="receiver" /> 
			<param name="amount" /> 
			<param name="amount_type" /> 
			<param name="balance_expiration_period" /> 
			<param name="receiver_system" /> 
		</output>
	</template>

	<!-- CheckAlarm -->
	<template procedureName="DB_CheckAlarm" handler="DBCON_01">
		<receiveTemplate>
			<Message type="serviceorder" initiator="soapcon" id="${guid}" session_id="@{newGuid}">
				<Item procedureName="BILLING.DB_ChangeAnnID" >
					<Attribute name="serv" type="STRING" value="${service}" />
					<Attribute name="dbresult" type="STRING" /> 
					<Attribute name="annid" type="STRING" /> 
				</Item>
			</Message>
		</receiveTemplate>
		<deliveryTemplate conditionEx="#{'#{/Message/Item/Attribute[@name='dbresult']/@value}'='0'}" >
			<set item="oparam:dbresult" value="0" /> 
			<set item="oparam:AnnID" value="${annid}" /> 
		</deliveryTemplate>
		<deliveryTemplate>
			<set item="oparam:dbresult" value="1" /> 
			<set item="oparam:AnnID" value="${annid}" /> 
		</deliveryTemplate>
		<input>
			<param name="service" /> 
		</input>
		<output>
			<param name="dbresult" /> 
			<param name="AnnID" /> 
		</output>
	</template>
	
	<!-- Check3G -->
	<template procedureName="DB_Check_3g" handler="DBCON_01">
		<receiveTemplate>
			<Message type="serviceorder" initiator="soapcon" id="${guid}" session_id="@{newGuid}">
				<Item procedureName="BILLING.mg_is_gprs_srv" >
					<Attribute name="mob_num" type="STRING" value="${customer}" />
					<Attribute name="dbresult" type="STRING" /> 
				</Item>
			</Message>
		</receiveTemplate>
		<deliveryTemplate>
			<set item="oparam:dbresult" value="${dbresult}" /> 
		</deliveryTemplate>
		<input>
			<param name="customer" /> 
		</input>
		<output>
			<param name="dbresult" /> 
		</output>
	</template>
	
	<!-- FTTXinCall 9892 -->
	<template procedureName="DB_Fttxincall" handler="DBCON_01">
      <receiveTemplate>
         <Message type="serviceorder" initiator="soapcon" id="${guid}" session_id="@{newGuid}">
            <Item procedureName="BILLING.DB_Fttxincall" >
               <Attribute name="callnumber" type="STRING" value="${customer}" />
               <Attribute name="c1" type="STRING"  value="${c1}"/> 
               <Attribute name="dialled" type="STRING"  value="${dialled}"/> 
               <Attribute name="dbresult" type="STRING" /> 
            </Item>
         </Message>
      </receiveTemplate>
      <deliveryTemplate>
         <set item="oparam:dbresult" condition="//Item/@dbresult='-1'" value="error" /> 
         <set item="oparam:dbresult" condition="//Item/@dbresult='0'" value="0" />  
      </deliveryTemplate>
      <input>
         <param name="customer" /> 
         <param name="c1" /> 
         <param name="dialled" /> 
      </input>
      <output>
         <param name="dbresult" /> 
      </output>
    </template>
	
		<!-- Check Personal Manager 0890 -->
	<template procedureName="DB_Check_PM" handler="DBCON_01">
		<receiveTemplate>
			<Message type="serviceorder" initiator="soapcon" id="${guid}" session_id="@{newGuid}">
				<Item procedureName="billing.lll_pers_m_for_absolut" >
					<Attribute name="p_msisdn" type="STRING" value="${customer}" />
					<Attribute name="is_prov" type="STRING"  value="${is_provision}"/> 
					<Attribute name="dbrez" type="STRING" /> 
				</Item>
			</Message>
		</receiveTemplate>
		<deliveryTemplate>
			<set item="oparam:dbresult" condition="//Item/@dbrez='-1'" value="error" /> 
			<set item="oparam:dbresult" condition="//Item/@dbrez='0'" value="0" />  
		</deliveryTemplate>
		<input>
			<param name="customer" /> 
			<param name="is_prov" /> 
		</input>
		<output>
			<param name="dbresult" /> 
		</output>
	</template>

		<!-- GET SET language in CRM -->
	<template procedureName="DB_LanguageControl" handler="DBCON_01">
		<receiveTemplate>
			<Message type="serviceorder" initiator="soapcon" id="${guid}" session_id="@{newGuid}">
				<Item procedureName="billing.mg_get_set_language_td" >
					<Attribute name="p_msisdn" type="STRING" value="${customer}" />
					<Attribute name="ac" type="STRING"  value="${action}"/> 
					<Attribute name="v_lang" type="STRING"  value="${language}"/>
					<Attribute name="dbresult" type="STRING" /> 
				</Item>
			</Message>
		</receiveTemplate>
		<deliveryTemplate>
			<set item="oparam:dbresult"  value="${dbresult}" />  
		</deliveryTemplate>
		<input>
			<param name="customer" /> 
			<param name="action" /> 
			<param name="language" />
		</input>
		<output>
			<param name="dbresult" /> 
		</output>
	</template>

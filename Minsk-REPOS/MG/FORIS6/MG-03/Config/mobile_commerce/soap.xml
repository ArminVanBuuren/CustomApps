
  <template procedureName="GetAbonentAmount" handler="DBCON_01">
    <receiveTemplate>
      <Message type="GetAbonentAmount" initiator="soapcon" id="${guid}" session_id="@{newGuid}">
        <Item procedureName="billing.soap_service_pkg.GetAbonentAmount">
          <Attribute name="p_msisdn" type="STRING" value="${customer}" />
          <Attribute name="Bal_i" type="STRING" />
        </Item>
      </Message>
    </receiveTemplate>
    <deliveryTemplate>
      <set item="oparam:Balance" condition="//Item/@dbresult='0'" value="${Bal_i}" />
      <set item="oparam:Balance" condition="//Item/@dbresult!='0'" value="Ошибка при выполнении запроса" />
    </deliveryTemplate>
    <input>
      <param name="customer" />
    </input>
    <output>
      <param name="Balance" type="3" value="0" />
    </output>
  </template>
  <template procedureName="GetAbonentInfo" handler="DBCON_01">
    <receiveTemplate>
      <Message type="GetAbonentInfo" initiator="soapcon" id="${guid}" session_id="@{newGuid}">
        <Item procedureName="billing.soap_service_pkg.GetAbonentInfo">
          <Attribute name="p_msisdn" type="STRING" value="${customer}" />
          <Attribute name="Dog" type="STRING" />
          <Attribute name="Sum_month" type="STRING" />
          <Attribute name="Sum_mon" type="STRING" />
        </Item>
      </Message>
    </receiveTemplate>
    <deliveryTemplate>
      <set item="oparam:Dog" condition="//Item/@dbresult='0'" value="${Dog}" />
      <set item="oparam:Dog" condition="//Item/@dbresult!='0'" value="Ошибка при выполнении запроса" />
      <set item="oparam:Sum_month" condition="//Item/@dbresult='0'" value="${Sum_month}" />
      <set item="oparam:Sum_month" condition="//Item/@dbresult!='0'" value="Ошибка при выполнении запроса" />
      <set item="oparam:Sum_mon" condition="//Item/@dbresult='0'" value="${Sum_mon}" />
      <set item="oparam:Sum_mon" condition="//Item/@dbresult!='0'" value="Ошибка при выполнении запроса" />
    </deliveryTemplate>
    <input>
      <param name="customer" />
    </input>
    <output>
      <param name="Dog" />
      <param name="Sum_month" />
      <param name="Sum_mon" />
    </output>
  </template>
  <template procedureName="PaymentRequest" handler="DBCON_01">
    <receiveTemplate>
      <Message type="PaymentRequest" initiator="soapcon" id="${guid}" session_id="@{newGuid}">
        <Item procedureName="billing.soap_service_pkg.PaymentRequest">
          <Attribute name="p_msisdn" type="STRING" value="${customer}" />
          <Attribute name="p_amount" type="STRING" value="${pay_amount}" />
          <Attribute name="mes" type="STRING" />
        </Item>
      </Message>
    </receiveTemplate>
    <deliveryTemplate>
      <set item="oparam:result" value="${mes}" />
    </deliveryTemplate>
    <input>
      <param name="customer" />
      <param name="pay_amount" />
    </input>
    <output>
      <param name="result" />
    </output>
  </template>
  <template procedureName="IsPossibleToPaymentRequest" handler="DBCON_01">
    <receiveTemplate>
      <Message type="IsPossibleToPaymentRequest" initiator="soapcon" id="${guid}" session_id="@{newGuid}">
        <Item procedureName="billing.soap_service_pkg.IsPossibleToPaymentRequest">
          <Attribute name="p_msisdn" type="STRING" value="${customer}" />
          <Attribute name="rez" type="STRING" />
          <Attribute name="resultdescription" type="STRING" />
        </Item>
      </Message>
    </receiveTemplate>
    <deliveryTemplate>
      <set item="oparam:result" condition="//Item/@dbresult='0'" value="${rez}" />
      <set item="oparam:result" condition="//Item/@dbresult!='0'" value="Ошибка выполнения запроса" />
      <set item="oparam:resultdsc" condition="//Item/@dbresult='0'" value="${resultdescription}" />
      <set item="oparam:resultdsc" condition="//Item/@dbresult!='0'" value="Ошибка выполнения запроса" />
    </deliveryTemplate>
    <input>
      <param name="customer" />
    </input>
    <output>
      <param name="result" />
      <param name="resultdsc" />
    </output>
  </template>
  <template procedureName="GetAbonentScores" handler="DBCON_01">
    <receiveTemplate>
      <Message type="GetAbonentScores" initiator="soapcon" id="${guid}" session_id="@{newGuid}">
        <Item procedureName="billing.soap_service_pkg.GetAbonentScores">
          <Attribute name="p_msisdn" type="STRING" value="${customer}" />
          <Attribute name="sum_bal" type="STRING" />
        </Item>
      </Message>
    </receiveTemplate>
    <deliveryTemplate>
      <set item="oparam:sum_bal" condition="//Item/@dbresult='0'" value="${sum_bal}" />
      <set item="oparam:sum_bal" condition="//Item/@dbresult!='0'" value="Ошибка выполнения запроса" />
    </deliveryTemplate>
    <input>
      <param name="customer" />
    </input>
    <output>
      <param name="sum_bal" />
    </output>
  </template>

<templateGroup name="ServicePackages">
  <template procedureName="DB_GetServicePackages">
    <condition />
    <receiveTemplate>
      <Message type="retrievecustomerdata" initiator="ivrcon" id="${guid}" session_id="@{newGuid}">
        <Item customer="${customer}" subject="product" languageCode="1" />
      </Message>
    </receiveTemplate>
    <input>
      <param name="customer" />
    </input>
    <output>
      <param name="pkgcodelist" type="1" value="" />
      <param name="dbresult" type="3" value="0" />
    </output>
  </template>
  <template procedureName="DB_ManageServicePackages">
    <condition />
    <receiveTemplate>
      <Message type="serviceorder" initiator="ivrcon" id="${guid}" session_id="@{newGuid}">
        <Item customer="${customer}" action="@{switch(${action}|?,2|9.2,3|10.2)}">
          <Product code="#{document('..\..\config\services_packages\servicepackage.xml')/packages/package[@ivrcode='${code}']/@crmcode}" />
        </Item>
      </Message>
    </receiveTemplate>
    <input>
      <param name="customer" />
      <param name="action" />
      <!-- 0-add package, 1-remove package -->
      <param name="code" />
      <!-- code of package -->
    </input>
    <output>
      <param name="dbresult" type="3" value="0" />
    </output>
  </template>
</templateGroup>
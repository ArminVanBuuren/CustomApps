<templates connector="SMS">
  <template procedureName="rbt_unpause2">
    <condition>
      <!--<test item="${token0}" matches="^375297776340$" />  -->
      <test item="${Sender}" matches="^(000111|000222|000333)$" />
      <test item="${token1}" matches="^RbtActivate$" />
    </condition>
    <receiveTemplate>
      <Message type="serviceorder" initiator="rbtcon" id="${guid}" session_id="${Sender}">
        <Item customer="${token0}">
          <Service id="@{switch(${token2}|fail,rbt_subscr|CB412694,rbt_fsubscr|CB412694,tech_rbt_fsubscr|CB412716,rbt_unpause|CB412694,rbt_paydaymel|FR848,rbt_addoutruleset|FR856,rbt_addcorprbt|FR857)}" service_id="@{switch(${token2}|fail,rbt_subscr|CB412694,rbt_fsubscr|CB412694,tech_rbt_fsubscr|CB412716,rbt_unpause|CB412694,rbt_paydaymel|FR848,rbt_addoutruleset|FR856,rbt_addcorprbt|FR857)}" action="2" />
        </Item>
      </Message>
    </receiveTemplate>
    <deliveryTemplate direction="input" condition="//Item/Service/@id='fail'">
      <set item="Content" value="INVALID SERVICE ID!" />
      <set item="Encoding" value="iso-8859-1" />
      <set item="Sender" value="11111" />
      <set item="Recipient" value="${session_id}" />
    </deliveryTemplate>
    <deliveryTemplate>
      <set item="Content" value="UNKNOWN ERROR!" />
      <set item="Content" condition="//Item/@dbresult=0" value="0" />
      <set item="Content" condition="//Item/@dbresult=320173" value="2" />
      <set item="Content" condition="//Item/@dbresult=320172" value="2" />
      <set item="Content" condition="//Item/@dbresult=320204" value="8" />
      <set item="Content" condition="//Item/@dbresult=320191" value="7" />
      <set item="Content" condition="//Item/@dbresult=320205" value="8" />
      <set item="Content" condition="//Item/@dbresult=320203" value="7" />
      <set item="Content" condition="//Item/@dbresult=320206" value="5" />
      <set item="Content" condition="//Item/@dbresult=-1" value="20" />
      <set item="Encoding" value="iso-8859-1" />
      <set item="Sender" value="11111" />
      <set item="Recipient" value="${session_id}" />
    </deliveryTemplate>
  </template>
  <template procedureName="Rbtrbt_pause2">
    <condition>
      <!--<test item="${token0}" matches="^375297776340$" />           -->
      <test item="${Sender}" matches="^(000111|000222|000333)$" />
      <test item="${token1}" matches="^RbtDeactivate$" />
    </condition>
    <receiveTemplate>
      <Message type="serviceorder" initiator="rbtcon" id="${guid}" session_id="${Sender}">
        <Item customer="${token0}">
          <Service id="@{switch(${token2}|fail,rbt_unsubscr|CB412694,rbt_pause|CB412694,tech_rbt_unsubscr|CB412716,rbt_unpaydaymel|FR848,rbt_deloutruleset|FR856,rbt_delcorprbt|FR857)}" service_id="@{switch(${token2}|fail,rbt_unsubscr|CB412694,rbt_pause|CB412694,tech_rbt_unsubscr|CB412716,rbt_unpaydaymel|FR848,rbt_deloutruleset|FR856,rbt_delcorprbt|FR857)}" action="3" />
        </Item>
      </Message>
    </receiveTemplate>
    <deliveryTemplate direction="input" condition="//Item/Service/@id='fail'">
      <set item="Content" value="INVALID SERVICE ID!" />
      <set item="Encoding" value="iso-8859-1" />
      <set item="Sender" value="11111" />
      <set item="Recipient" value="${session_id}" />
    </deliveryTemplate>
    <deliveryTemplate>
      <set item="Content" value="UNKNOWN ERROR!" />
      <set item="Content" condition="//Item/@dbresult=0" value="0" />
      <set item="Content" condition="//Item/@dbresult=320172" value="2" />
      <set item="Content" condition="//Item/@dbresult=320174" value="0" />
      <set item="Content" condition="//Item/@dbresult=320204" value="6" />
      <set item="Content" condition="//Item/@dbresult=320203" value="9" />
      <set item="Content" condition="//Item/@dbresult=320206" value="5" />
      <set item="Content" condition="//Item/@dbresult=-1" value="20" />
      <set item="Encoding" value="iso-8859-1" />
      <set item="Sender" value="11111" />
      <set item="Recipient" value="${session_id}" />
    </deliveryTemplate>
  </template>
  <!--<template procedureName="rbt_unpause">
    <condition>
	
	<test item="${Sender}" matches="^(000111|000222|000333)$" />
	<test item="${token1}" matches="^RbtActivate$" />
    </condition>
	<receiveTemplate>
		<Message type="serviceorder" initiator="rbtcon" id="${guid}" session_id="${Sender}">
			<Item customer="${token0}">
				<Service  id="@{switch(${token2}|fail,rbt_subscr|CB412694,rbt_fsubscr|CB412694,tech_rbt_fsubscr|CB412716,rbt_unpause|CB412694)}" service_id="@{switch(${token2}|fail,rbt_subscr|CB412694,rbt_fsubscr|CB412694,tech_rbt_fsubscr|CB412716,rbt_unpause|CB412694)}" action="2"/>
		</Item>
	</Message>
	</receiveTemplate>
	<deliveryTemplate direction="input" condition="//Item/Service/@id='fail'" >
		<set item="Content" value="INVALID SERVICE ID!" />
		<set item="Encoding" value="iso-8859-1" />
		<set item="Sender" value="11111" />
		<set item="Recipient" value="${session_id}"/>
	</deliveryTemplate>	
    <deliveryTemplate>
		<set item="Content" value="UNKNOWN ERROR!" />
		<set item="Content" condition="//Item/@dbresult=0" value="0" />
		<set item="Content" condition="//Item/@dbresult=320341" value="1" />
		<set item="Content" condition="//Item/@dbresult=320204" value="2" />
		<set item="Content" condition="//Item/@dbresult=320282" value="3" />
		<set item="Content" condition="//Item/@dbresult=320343" value="3" />
		<set item="Content" condition="//Item/@dbresult=320172" value="3" />
		<set item="Content" condition="//Item/@dbresult=320173" value="3" />
		<set item="Content" condition="//Item/@dbresult=320174" value="3" />
		<set item="Content" condition="//Item/@dbresult=320191" value="7" />
		<set item="Content" condition="//Item/@dbresult=320204" value="9" />
		<set item="Content" condition="//Item/@dbresult=320203" value="8" /> 
		<set item="Content" condition="//Item/@dbresult=320205" value="8" />
		<set item="Content" condition="//Item/@dbresult=-1" value="20" />
		<set item="Encoding" value="iso-8859-1" />
		<set item="Sender" value="11111" />
		<set item="Recipient" value="${session_id}"/>
    </deliveryTemplate>
</template> -->
  <!--<template procedureName="Rbtrbt_pause">
    <condition>
	<test item="${Sender}" matches="^(000111|000222|000333)$" />
	<test item="${token1}" matches="^RbtDeactivate$" />
    </condition>
	<receiveTemplate>
				<Message type="serviceorder" initiator="rbtcon" id="${guid}" session_id="${Sender}">
					<Item customer="${token0}">
						<Service 
id="@{switch(${token2}|fail,rbt_unsubscr|CB412694,rbt_pause|CB412694,tech_rbt_unsubscr|CB412716)}"
service_id="@{switch(${token2}|fail,rbt_unsubscr|CB412694,rbt_pause|CB412694,tech_rbt_unsubscr|CB412716)}" action="3" />
					</Item>
				</Message>
	</receiveTemplate>
	<deliveryTemplate direction="input" condition="//Item/Service/@id='fail'" >
		<set item="Content" value="INVALID SERVICE ID!" />
		<set item="Encoding" value="iso-8859-1" />
		<set item="Sender" value="11111" />
		<set item="Recipient" value="${session_id}"/>
	</deliveryTemplate>	
    <deliveryTemplate>
		<set item="Content" value="UNKNOWN ERROR!" />
		<set item="Content" condition="//Item/@dbresult=0" value="0" />
		<set item="Content" condition="//Item/@dbresult=320341" value="1" />
		<set item="Content" condition="//Item/@dbresult=320204" value="2" />
		<set item="Content" condition="//Item/@dbresult=320282" value="3" />
		<set item="Content" condition="//Item/@dbresult=320343" value="3" />
		<set item="Content" condition="//Item/@dbresult=320172" value="3" />
		<set item="Content" condition="//Item/@dbresult=320173" value="3" />
		<set item="Content" condition="//Item/@dbresult=320174" value="3" />
		<set item="Content" condition="//Item/@dbresult=320191" value="7" />
		<set item="Content" condition="//Item/@dbresult=320204" value="8" />
		<set item="Content" condition="//Item/@dbresult=320203" value="9" />
		<set item="Content" condition="//Item/@dbresult=320205" value="8" />
		<set item="Content" condition="//Item/@dbresult=-1" value="20" />
        <set item="Encoding" value="iso-8859-1" />
		<set item="Sender" value="11111" />
		<set item="Recipient" value="${session_id}"/>
    </deliveryTemplate>
</template> -->
  <!--<template procedureName="RbtActivate">
    <condition>
        <test item="${Sender}" matches="^(000111|000222|000333)$" />
	<test item="${token1}" matches="^RbtActivate$" />
    </condition>
	<receiveTemplate>
		<Message type="serviceorder" initiator="rbtcon" id="${guid}" session_id="${Sender}">
			<Item customer="${token0}">
			<Service id="@{switch(${token2}|fail,rbt_subscr|CB412694,rbt_fsubscr|CB412694,tech_rbt_fsubscr|CB412716,rbt_unpause|CB412694)}"   action="2"/>
		</Item>
	</Message>
	</receiveTemplate>
	<deliveryTemplate direction="input" condition="//Item/Service/@id='fail'" >
		<set item="Content" value="INVALID SERVICE ID!" />
		<set item="Encoding" value="iso-8859-1" />
		<set item="Sender" value="11111" />
		<set item="Recipient" value="${session_id}"/>
	</deliveryTemplate>	
    <deliveryTemplate>
		<set item="Content" value="UNKNOWN ERROR!" />
		<set item="Content" condition="//Item/@dbresult=0" value="0" />
		<set item="Content" condition="//Item/@dbresult=320341" value="1" />
		<set item="Content" condition="//Item/@dbresult=320204" value="2" />
		<set item="Content" condition="//Item/@dbresult=320282" value="3" />
		<set item="Content" condition="//Item/@dbresult=320343" value="3" />
		<set item="Content" condition="//Item/@dbresult=320172" value="3" />
		<set item="Content" condition="//Item/@dbresult=320173" value="3" />
		<set item="Content" condition="//Item/@dbresult=320191" value="7" />
		<set item="Content" condition="//Item/@dbresult=320205" value="8" />
		<set item="Content" condition="//Item/@dbresult=320206" value="9" />
		<set item="Content" condition="//Item/@dbresult=-1" value="20" />
		<set item="Encoding" value="iso-8859-1" />
		<set item="Sender" value="11111" />
		<set item="Recipient" value="${session_id}"/>
    </deliveryTemplate>
</template>  -->
  <!--<template procedureName="RbtDeactivate">
    <condition>
        <test item="${Sender}" matches="^(000111|000222|000333)$" />
	<test item="${token1}" matches="^RbtDeactivate$" />
    </condition>
	<receiveTemplate>
				<Message type="serviceorder" initiator="rbtcon" id="${guid}" session_id="${Sender}">
					<Item customer="${token0}">
						<Service
id="@{switch(${token2}|fail,rbt_unsubscr|CB412694,rbt_pause|CB412694,tech_rbt_unsubscr|CB412716)}"  action="3" />
					</Item>
				</Message>
	</receiveTemplate>
	<deliveryTemplate direction="input" condition="//Item/Service/@id='fail'" >
		<set item="Content" value="INVALID SERVICE ID!" />
		<set item="Encoding" value="iso-8859-1" />
		<set item="Sender" value="11111" />
		<set item="Recipient" value="${session_id}"/>
	</deliveryTemplate>	
    <deliveryTemplate>
		<set item="Content" value="UNKNOWN ERROR!" />
		<set item="Content" condition="//Item/@dbresult=0" value="0" />
		<set item="Content" condition="//Item/@dbresult=320341" value="1" />
		<set item="Content" condition="//Item/@dbresult=320204" value="2" />
		<set item="Content" condition="//Item/@dbresult=320282" value="3" />
		<set item="Content" condition="//Item/@dbresult=320343" value="3" />
		<set item="Content" condition="//Item/@dbresult=320172" value="3" />
		<set item="Content" condition="//Item/@dbresult=320173" value="3" />
		<set item="Content" condition="//Item/@dbresult=320191" value="7" />
		<set item="Content" condition="//Item/@dbresult=320205" value="8" />
		<set item="Content" condition="//Item/@dbresult=320206" value="9" />
		<set item="Content" condition="//Item/@dbresult=-1" value="20" />
        <set item="Encoding" value="iso-8859-1" />
		<set item="Sender" value="11111" />
		<set item="Recipient" value="${session_id}"/>
    </deliveryTemplate>
</template>  -->
  <template procedureName="RbtPayment">
    <condition>
      <test item="${Sender}" matches="^(000111|000222|000333)$" />
      <test item="${token1}" matches="^RbtPayment$" />
    </condition>
    <receiveTemplate>
      <Message type="retrievecustomerdata" initiator="rbtcon" id="${guid}" session_id="${Sender}">
        <Item customer="${token0}" subject="balance" />
      </Message>
    </receiveTemplate>
    <deliveryTemplate>
      <set item="Content" condition="//Item/@dbresult=0" value="0" />
      <set item="Content" condition="//Item/@dbresult=320341" value="1" />
      <set item="Content" condition="//Item/@dbresult=320204" value="2" />
      <set item="Content" condition="//Item/@dbresult=320282" value="3" />
      <set item="Content" condition="//Item/@dbresult=320343" value="3" />
      <set item="Content" condition="//Item/@dbresult=320172" value="3" />
      <set item="Content" condition="//Item/@dbresult=320173" value="3" />
      <set item="Content" condition="//Item/@dbresult=320191" value="7" />
      <set item="Content" condition="//Item/@dbresult=320205" value="8" />
      <set item="Content" condition="//Item/@dbresult=320206" value="9" />
      <set item="Content" condition="//Item/@dbresult=-1" value="20" />
      <set item="Content" value="UNKNOWN ERROR!" />
      <set item="Encoding" value="iso-8859-1" />
      <set item="Sender" value="11111" />
      <set item="Recipient" value="${session_id}" />
    </deliveryTemplate>
  </template>
  <!--
RC_InvalidService		320172
RC_InvalidServiceListRead	320173
RC_WrongAction			320174
RC_InvalidServiceCode		320282
RC_ServNotActivated		320343
RC_ServiceNotInTP		320204
RC_ServiceAlreadyAdded		320204
RC_ServiceAlreadyDeleted	320203
RC_NotEnoughMoney		320191
RC_InvalidNumber		320341
RC_ServiceAlreadyIs		320205
-->
  <template procedureName="DeliveryRequest">
    <retry delay="5" attempts="1" />
    <deliveryTemplate>
      <set item="Content" value="#{//Content/text()}" />
      <set item="Encoding" value="iso-8859-1" />
    </deliveryTemplate>
  </template>
  <template procedureName="retrievecustomerdataresult">
    <retry delay="5" attempts="1" />
    <deliveryTemplate>
      <set item="Content" value="#{//Content/text()}" />
      <set item="Encoding" value="iso-8859-1" />
    </deliveryTemplate>
  </template>
</templates>
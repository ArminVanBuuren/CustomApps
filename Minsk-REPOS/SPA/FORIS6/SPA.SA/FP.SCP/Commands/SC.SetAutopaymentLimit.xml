<?xml version="1.0" encoding="UTF-8"?>
<Command Name="SC.SetAutopaymentLimit" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <Description>Set autopayment limit</Description>
  <Author Name="Victor Kosonogov" Date="2017-05-01+01:01"/>
  <Properties GenerationType="DataSetXml" />
  <Request>
    <RequestTemplate>
      <![CDATA[<DataSet Name="UpdateLimitsDataSet" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <Attributes>
    <Attribute Name="Protocol" Type="System.String" Value="Remoting"/>
    <Attribute Name="Procedure" Type="System.String" Value="UpdateLimits"/>
    <Attribute Name="Interface" Type="System.String" Value="ICrmOperations"/>
    <Attribute Name="UpdateLimitsDataSet" Type="System.Data.DataSet" Value=""/>
  </Attributes>
  <DataTable Name="AutoPaymentLimitsDataTable">
    <Columns>
      <Column Name="REQUEST_ID" Type="System.String"/>
      <Column Name="PERSONAL_ACCOUNT_ID" Type="System.Int64"/>
      <Column Name="LIMIT_VALUE" Type="System.Decimal"/>
    </Columns>
    <Rows>
      <Row REQUEST_ID="reversecut(##org.id##,4)-##GlobalUid##" PERSONAL_ACCOUNT_ID="##PersonalAccount##" ##LIMIT_VALUE## />
    </Rows>
  </DataTable>
</DataSet>]]>
    </RequestTemplate>
    <EmulationPrintoutTemplate><![CDATA[]]></EmulationPrintoutTemplate>
    <Item Name="org.id" Type="Wellknown"/>
    <Item Name="GlobalUid" Type="Wellknown"/>
    <Item Name="PersonalAccount" Type="Wellknown"/>
    <Item Name="LIMIT_VALUE" Type="LocalParameter"/>
  </Request>
  <ParametersList>
    <Parameter Name="LIMIT_VALUE" IsChoice="true">
      <Source Path="//AdditionalData/RemoveList/RFS_FP_AUTO_PAYMENT_LIMIT" PostFormat=" "/>
      <Source Path="//AdditionalData//RFS_FP_AUTO_PAYMENT_LIMIT/AutoPaymentThreshold/Value" PostFormat="LIMIT_VALUE=&quot;replacestr('{0}',',','.')&quot;"/>
    </Parameter>
  </ParametersList>
  <ErrorsList CodePage="ascii"/>
</Command>

<BusinessProcessData name="Change Financial Platform for Change of Tariff Plan">
  <businessprocess>
    <scenario>
      <objectlist>
        <object name="BPMProcessingUnit" class="FORIS.ServiceProvisioning.BPM.BPMProcessingUnit" assembly="FORIS.SPA.BPMProcessingUnit.dll" />
        <object name="BPMProcessingUnitConditional" class="FORIS.ServiceProvisioning.BPM.BPMProcessingUnitConditional" assembly="FORIS.SPA.BPMProcessingUnit.dll" />
        <object name="ImplicitHostRedirectingProcessor" class="FORIS.ServiceProvisioning.BPM.ImplicitHostRedirectingProcessor" assembly="FORIS.SPA.BPMProcessingUnit.dll" />
        <object name="TerminalStub" class="FORIS.ServiceProvisioning.BPM.TerminalStub" assembly="FORIS.SPA.BPMProcessingUnit.dll" />
        <object name="SCProcessingUnit" class="FORIS.ServiceProvisioning.BPM.SCProcessingUnit" assembly="FORIS.SPA.BPMProcessingUnit.dll" />
      </objectlist>
      <automat>
        <node name="SCProcessingUnit" object="SCProcessingUnit">
          <parameterslist>
            <param name="RFSFilterHandler" value="FP.ExtendedExclusiveHandler" />
          </parameterslist>
          <resultlist>
            <result value="" node="CreatePAForTPChange" />
          </resultlist>
        </node>
        <node name="CreatePAForTPChange" object="ImplicitHostRedirectingProcessor">
          <parameterslist>
            <param name="operation" value="CreatePAForTPChange" />
            <param name="SrcXml" value="$XmlRequest" />
            <param name="MultiLevelCondition" value="(//NewPlatform/HostCode) AND (//NewPlatform/HostCode != //PreviousPlatform/HostCode) AND (//NewPlatform/HostTypeCode != //PreviousPlatform/HostTypeCode)" />
            <param name="CodeTemplate" value="FP:{//NewPlatform/HostCode}" />
          </parameterslist>
          <resultlist>
            <result value="282" node="ExitNode" />
            <result value="" node="CreateTDForTPChange" />
          </resultlist>
        </node>
        <node name="CreateTDForTPChange" object="ImplicitHostRedirectingProcessor">
          <parameterslist>
            <param name="operation" value="CreateTDForTPChange" />
            <param name="SrcXml" value="$XmlRequest" />
            <param name="MultiLevelCondition" value="(//NewPlatform/HostCode) AND (//NewPlatform/HostCode != //PreviousPlatform/HostCode) AND (//NewPlatform/HostTypeCode != //PreviousPlatform/HostTypeCode)" />
            <param name="CodeTemplate" value="FP:{//NewPlatform/HostCode}" />
          </parameterslist>
          <resultlist>
            <result value="282" node="ExitNode" />
            <result value="" node="ChangeCUGInFP" />
          </resultlist>
        </node>
        <node name="ChangeCUGInFP" object="ImplicitHostRedirectingProcessor">
          <parameterslist>
            <param name="operation" value="ChangeCUGInFP" />
            <param name="SrcXml" value="$XmlRequest" />
            <param name="MultiLevelCondition" value="(//NewPlatform/HostCode) AND (//NewPlatform/HostCode != //PreviousPlatform/HostCode) AND (//NewPlatform/HostTypeCode != //PreviousPlatform/HostTypeCode)" />
            <param name="CodeTemplate" value="FP:{//NewPlatform/HostCode}" />
          </parameterslist>
          <resultlist>
            <result value="" node="ExitNode" />
          </resultlist>
        </node>
        <node name="ExitNode" object="TerminalStub">
          <parameterslist />
          <resultlist>
            <result value="" node="" />
          </resultlist>
        </node>
      </automat>
    </scenario>
  </businessprocess>
</BusinessProcessData>
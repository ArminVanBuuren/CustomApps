<BusinessProcessData name="Unblock Subscriber" successOnNoOperation="true">
  <businessprocess>
    <scenario>
      <objectlist>
        <object name="BPMProcessingUnit" class="FORIS.ServiceProvisioning.BPM.BPMProcessingUnit" assembly="FORIS.SPA.BPMProcessingUnit.dll" />
        <object name="ParallelUnBlock" class="FORIS.ServiceProvisioning.BPM.ParallelProcessingUnit" assembly="FORIS.SPA.BPMProcessingUnit.dll" />
        <object name="CheckBLK" class="FORIS.ScenarioProcessing.CommonUnits.IfMultipleXmlConditionsResolver" assembly="FORIS.SPA.SPF.dll" />
        <object name="TerminalStub" class="FORIS.ServiceProvisioning.BPM.TerminalStub" assembly="FORIS.SPA.BPMProcessingUnit.dll" />
        <object name="DummyResponder" class="FORIS.ScenarioProcessing.CommonUnits.ConditionalDummyResultCreator" assembly="FORIS.SPA.SPF.dll" />
      </objectlist>
      <automat>
        <node name="DeleteFullBLK" object="CheckBLK">
          <parameterslist>
            <param name="ObjectNameInContext" value="$XmlRequest" />
            <param name="OrXmlPath:0" value="ExtendedRequestMessage/AdditionalData/WithdrawalList/CBBLKLOST" />
            <param name="OrXmlPath:1" value="ExtendedRequestMessage/AdditionalData/WithdrawalList/FRBLKCHK" />
            <param name="OrXmlPath:2" value="ExtendedRequestMessage/AdditionalData/WithdrawalList/FRBLKFIN" />
            <param name="OrXmlPath:3" value="ExtendedRequestMessage/AdditionalData/WithdrawalList/FRBLKKEEP" />
            <param name="OrXmlPath:4" value="ExtendedRequestMessage/AdditionalData/WithdrawalList/FRBLKPAY" />
            <param name="OrXmlPath:5" value="ExtendedRequestMessage/AdditionalData/WithdrawalList/FRBLKTIME" />
            <param name="OrXmlPath:6" value="ExtendedRequestMessage/AdditionalData/WithdrawalList/FRBLKUSER" />
          </parameterslist>
          <resultlist>
            <result value="0" node="IsAlreadyFullBlocked" />
            <result value="1" node="DeletePartBLK" />
          </resultlist>
        </node>
        <node name="IsAlreadyFullBlocked" object="CheckBLK">
          <parameterslist>
            <param name="ObjectNameInContext" value="$XmlRequest" />
            <param name="IfXmlPath:0" value="(*[count(//RegisteredList/CBBLKLOST | //RegisteredList/FRBLKCHK | //RegisteredList/FRBLKFIN | //RegisteredList/FRBLKKEEP | //RegisteredList/FRBLKPAY | //RegisteredList/FRBLKTIME | //RegisteredList/FRBLKUSER) &lt;= 1])[1]" />
          </parameterslist>
          <resultlist>
            <result value="0" node="IsAlreadyPartBlocked" />
            <result value="1" node="DeleteBlockOnFP" />
          </resultlist>
        </node>
        <node name="IsAlreadyPartBlocked" object="CheckBLK">
          <parameterslist>
            <param name="ObjectNameInContext" value="$XmlRequest" />
            <param name="OrXmlPath:0" value="ExtendedRequestMessage/AdditionalData/RegisteredList/FRBLKP" />
            <param name="OrXmlPath:1" value="ExtendedRequestMessage/AdditionalData/RegisteredList/BLTDLIM" />
          </parameterslist>
          <resultlist>
            <result value="0" node="UnBlockFullAndBlockPart" />
            <result value="1" node="UnBlockFull" />
          </resultlist>
        </node>
        <node name="UnBlockFullAndBlockPart" object="BPMProcessingUnit">
          <parameterslist>
            <param name="operation" value="UnBlockFullAndBlockPart" />
          </parameterslist>
          <resultlist>
            <result value="" node="DeleteBlockOnFP" />
          </resultlist>
        </node>
        <node name="UnBlockFull" object="ParallelUnBlock">
          <parameterslist>
            <param name="operation" value="UnBlockFull" requiredForSuccess="SUCCESS" />
            <param name="operation" value="UnBlockonDB" requiredForSuccess="SUCCESS" />
            <param name="operation" value="UnBlockonQP" requiredForSuccess="SUCCESS" />
            <param name="operation" value="UnBlockonBT" requiredForSuccess="SUCCESS" />
            <param name="operation" value="UnBlockonZN" requiredForSuccess="SUCCESS" />
            <param name="operation" value="UnBlockonME" requiredForSuccess="SUCCESS" />
            <param name="operation" value="UnBlockonTV" requiredForSuccess="SUCCESS" />
            <param name="operation" value="UnBlockonMT" requiredForSuccess="SUCCESS" />
            <param name="operation" value="UnBlockonSL" requiredForSuccess="SUCCESS" />
            <param name="operation" value="UnBlockonM2" requiredForSuccess="SUCCESS" />
            <param name="operation" value="UnBlockonDR" requiredForSuccess="SUCCESS" />
            <param name="operation" value="UnBlockonMA" requiredForSuccess="SUCCESS" />
            <param name="operation" value="UnBlockonVI" requiredForSuccess="SUCCESS" />
            <param name="operation" value="UnBlockonMU" requiredForSuccess="SUCCESS" />
            <param name="operation" value="UnBlockonGS" requiredForSuccess="SUCCESS" />
            <param name="operation" value="UnBlockonRG" requiredForSuccess="SUCCESS" />
            <param name="operation" value="UnBlockonPF" requiredForSuccess="SUCCESS" />
            <param name="operation" value="UnBlockonFK" requiredForSuccess="SUCCESS" />
            <param name="operation" value="UnBlockonVA" requiredForSuccess="SUCCESS" />
            <param name="operation" value="UnBlockonLB" requiredForSuccess="SUCCESS" />
            <param name="operation" value="UnBlockonMI" requiredForSuccess="SUCCESS" />
            <param name="operation" value="UnBlockonSF" requiredForSuccess="SUCCESS" />
            <param name="operation" value="UnBlockonOP" requiredForSuccess="SUCCESS" />
          </parameterslist>
          <resultlist>
            <result value="" node="DeleteBlockOnFP" />
          </resultlist>
        </node>
        <node name="DeletePartBLK" object="CheckBLK">
          <parameterslist>
            <param name="ObjectNameInContext" value="$XmlRequest" />
            <param name="OrXmlPath:0" value="ExtendedRequestMessage/AdditionalData/WithdrawalList/BLTDLIM" />
            <param name="OrXmlPath:1" value="ExtendedRequestMessage/AdditionalData/WithdrawalList/FRBLKP" />
            <param name="OrXmlPath:2" value="ExtendedRequestMessage/AdditionalData/WithdrawalList/FRBLCNCOT" />
          </parameterslist>
          <resultlist>
            <result value="0" node="IsAlreadyFullBlocked_2" />
            <result value="1" node="DeleteBlockOnFP" />
          </resultlist>
        </node>
        <node name="IsAlreadyFullBlocked_2" object="CheckBLK">
          <parameterslist>
            <param name="ObjectNameInContext" value="$XmlRequest" />
            <param name="OrXmlPath:0" value="ExtendedRequestMessage/AdditionalData/RegisteredList/CBBLKLOST" />
            <param name="OrXmlPath:1" value="ExtendedRequestMessage/AdditionalData/RegisteredList/FRBLKCHK" />
            <param name="OrXmlPath:2" value="ExtendedRequestMessage/AdditionalData/RegisteredList/FRBLKFIN" />
            <param name="OrXmlPath:3" value="ExtendedRequestMessage/AdditionalData/RegisteredList/FRBLKKEEP" />
            <param name="OrXmlPath:4" value="ExtendedRequestMessage/AdditionalData/RegisteredList/FRBLKPAY" />
            <param name="OrXmlPath:5" value="ExtendedRequestMessage/AdditionalData/RegisteredList/FRBLKTIME" />
            <param name="OrXmlPath:6" value="ExtendedRequestMessage/AdditionalData/RegisteredList/FRBLKUSER" />
          </parameterslist>
          <resultlist>
            <result value="0" node="DeleteBlockOnFP" />
            <result value="1" node="IsAlreadyPartBlocked_2" />
          </resultlist>
        </node>
        <node name="IsAlreadyPartBlocked_2" object="CheckBLK">
          <parameterslist>
            <param name="ObjectNameInContext" value="$XmlRequest" />
            <param name="IfXmlPath:0" value="(*[count(//RegisteredList/BLTDLIM | //RegisteredList/FRBLKP | //RegisteredList/FRBLCNCOT) &lt;= 1])[1]" />
          </parameterslist>
          <resultlist>
            <result value="0" node="UnBlockPart" />
            <result value="1" node="DeleteBlockOnFP" />
          </resultlist>
        </node>
        <node name="UnBlockPart" object="ParallelUnBlock">
          <parameterslist>
            <param name="operation" value="UnBlockPart" requiredForSuccess="SUCCESS" />
            <param name="operation" value="UnBlockonDB" requiredForSuccess="SUCCESS" />
            <param name="operation" value="UnBlockonQP" requiredForSuccess="SUCCESS" />
            <param name="operation" value="UnBlockonBT" requiredForSuccess="SUCCESS" />
            <param name="operation" value="UnBlockonZN" requiredForSuccess="SUCCESS" />
            <param name="operation" value="UnBlockonME" requiredForSuccess="SUCCESS" />
            <param name="operation" value="UnBlockonTV" requiredForSuccess="SUCCESS" />
            <param name="operation" value="UnBlockonMT" requiredForSuccess="SUCCESS" />
            <param name="operation" value="UnBlockonSL" requiredForSuccess="SUCCESS" />
            <param name="operation" value="UnBlockonM2" requiredForSuccess="SUCCESS" />
            <param name="operation" value="UnBlockonDR" requiredForSuccess="SUCCESS" />
            <param name="operation" value="UnBlockonMA" requiredForSuccess="SUCCESS" />
            <param name="operation" value="UnBlockonVI" requiredForSuccess="SUCCESS" />
            <param name="operation" value="UnBlockonMU" requiredForSuccess="SUCCESS" />
            <param name="operation" value="UnBlockonGS" requiredForSuccess="SUCCESS" />
            <param name="operation" value="UnBlockonRG" requiredForSuccess="SUCCESS" />
            <param name="operation" value="UnBlockonPF" requiredForSuccess="SUCCESS" />
            <param name="operation" value="UnBlockonFK" requiredForSuccess="SUCCESS" />
            <param name="operation" value="UnBlockonVA" requiredForSuccess="SUCCESS" />
            <param name="operation" value="UnBlockonLB" requiredForSuccess="SUCCESS" />
            <param name="operation" value="UnBlockonMI" requiredForSuccess="SUCCESS" />
            <param name="operation" value="UnBlockonSF" requiredForSuccess="SUCCESS" />
            <param name="operation" value="UnBlockonOP" requiredForSuccess="SUCCESS" />
          </parameterslist>
          <resultlist>
            <result value="" node="DeleteBlockOnFP" />
          </resultlist>
        </node>
        <node name="DeleteBlockOnFP" object="BPMProcessingUnit">
          <parameterslist>
            <param name="operation" value="DelBlockOnFP" />
          </parameterslist>
          <resultlist>
            <result value="" node="DeleteBlockOnBMS" />
          </resultlist>
        </node>
        <node name="DeleteBlockOnBMS" object="BPMProcessingUnit">
          <parameterslist>
            <param name="operation" value="DeleteBlockOnBMS" />
          </parameterslist>
          <resultlist>
            <result value="" node="ExitNode" />
          </resultlist>
        </node>
        <node name="ExitNode" object="TerminalStub">
          <parameterslist />
          <resultlist>
            <result value="" node="" />
          </resultlist>
        </node>
      </automat>
    </scenario>
  </businessprocess>
</BusinessProcessData>